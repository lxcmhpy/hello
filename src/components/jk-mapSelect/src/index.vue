<script>
export default {
  props: {
    config: {
      type: Object,
      default() {
        return {}
      }
    }
  },
  computed: {
    list() {
      return this.config.option
    }
  },
  methods: {
    /**
     * 选中节点时触发
     */
    handleChange(value) {
      this.$emit("handleChange", value)
    },

    /**
     * 级联选择框生成函数
     */
    renderCascader() {
      let data = this.list[0]
      return (
        <div class="jk-mapSelect-box">
          {
            data.imgUrl ? <img src={data.imgUrl} /> : null
          }
          <div class="selectDown">
            <el-popover
              placement="bottom"
              width="200"
              trigger="click">
              <div class="block">
                <el-cascader
                  clearable
                  options={data.options}
                  on-change={ this.handleChange }>
                </el-cascader>
              </div>
              <div slot="reference">
                <el-dropdown placement="bottom">
                  <span class="el-dropdown-link">
                    { data.title }<i class="el-icon-arrow-down el-icon--right"></i>
                  </span>
                  <el-dropdown-menu></el-dropdown-menu>
                </el-dropdown>
              </div>
            </el-popover>
          </div>
        </div>
      )
    },

    /**
     * 下拉选择框生成函数
     */
    renderDropdown() {
      let data = this.list[1]
      return (
        <div class="jk-mapSelect-box">
          {
            data.imgUrl ? <img src={data.imgUrl} /> : null
          }
          <div class="selectDown">
            <el-dropdown>
              <span class="el-dropdown-link">
                {data.title}<i class="el-icon-arrow-down el-icon--right"></i>
              </span>
              <el-dropdown-menu slot="dropdown">
                <el-dropdown-item>执法人员</el-dropdown-item>
                <el-dropdown-item>执法机构</el-dropdown-item>
                <el-dropdown-item>执法车辆</el-dropdown-item>
                <el-dropdown-item>执法船舶</el-dropdown-item>
                <el-dropdown-item>非现场站点</el-dropdown-item>
              </el-dropdown-menu>
            </el-dropdown>
          </div>
        </div>
      )
    },

    /**
     * 全屏按钮生成函数
     */
    renderFull() {
      let data = this.list[2]
      return (
        <div class="jk-mapSelect-box">
          {
            data.imgUrl ? <img src={data.imgUrl} /> : null
          }
          <span class="fullScreen">{data.title}</span>
        </div>
      )
    }
  },
  render() {
    return (
      <div class="jk-mapSelect">
        {this.renderCascader()}
        {this.renderDropdown()}
        {this.renderFull()}
      </div>
    )
  }
}
</script>

<style lang="scss">
.jk-mapSelect {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 417px;
  height: 46px;
  background: #FFFFFF;
  &-box {
    flex: 1;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    img {
      margin-right: 10px;
    }
    .fullScreen {
      font-size: 14px;
      color: #606266;
      cursor: pointer;
    }
  }
}
</style>
