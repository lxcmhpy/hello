{"version":3,"sources":["webpack:///src/page/ocr/idCardHistory.vue","webpack:///./src/page/ocr/idCardHistory.vue?4014","webpack:///./src/page/ocr/idCardHistory.vue"],"names":["idCardHistory","data","routekey","history","columns","title","dataIndex","align","scopedSlots","customRender","key","width","historyKey","serviceApiId","requestList","pagination","pageSize","loading","computed","extends_default","Object","vuex_esm","components","requestAndHisSubMenu","methods","getImage","url","getApiList","_this","this","$store","dispatch","then","res","historyItem","apiHistoryList","_id","listPage","current","Number","getRequestlist","error","currentPage","_this2","params","page","showFullLoading","total","totalCount","handleTableChange","gotoDetail","record","$router","push","name","created","ocr_idCardHistory","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","dataSource","on","change","_u","fn","text","src","_s","$util","timestampToDay","class","index","status","click","$event","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"uJAsCAA,wBACAC,KADA,WA6BA,OACAC,UAAA,0BACAC,WACAC,UA5BAC,MAAA,kBACAC,UAAA,qBACAC,MAAA,SACAC,aAAAC,aAAA,SAGAJ,MAAA,cACAC,UAAA,aACAC,MAAA,SACAC,aAAAC,aAAA,gBAGAJ,MAAA,SACAC,UAAA,SACAC,MAAA,SACAC,aAAAC,aAAA,YAGAJ,MAAA,GACAK,IAAA,SACAH,MAAA,SACAI,MAAA,OACAH,aAAAC,aAAA,eAOAG,WAAA,uCACAC,aAAA,GACAC,eACAC,YAAAC,SAAA,IACAC,SAAA,IAIAC,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EAAA,+BAEAE,YACAC,uBAAA,GAEAC,SACAC,SADA,SACAC,GAEA,MADA,kDACAA,GAEAC,WALA,WAKA,IAAAC,EAAAC,KACAA,KAAAC,OAAAC,SAAA,iBAAAC,KACA,SAAAC,GACA,IAAAC,EAAAN,EAAAO,eAAAP,EAAAhB,YACAgB,EAAAf,aAAAqB,EAAAE,IACAR,EAAAS,UACAT,EAAAS,SACAT,EAAAb,WAAAuB,QAAAC,OAAAX,EAAAS,UACAT,EAAAY,eAAAZ,EAAAS,WAEAT,EAAAY,eAAA,IAGA,SAAAC,OAKAD,eAvBA,SAuBAE,GAAA,IAAAC,EAAAd,KACAe,GACA/B,aAAAgB,KAAAhB,aACAgC,KAAAH,EACA1B,SAAAa,KAAAb,SACA8B,gBAAA,GAAAJ,GAEAb,KAAAZ,SAAA,EACAY,KAAAC,OAAAC,SAAA,SAAAa,GAAAZ,KACA,SAAAC,GAEAU,EAAA7B,YAAAmB,EAAAhC,UACA,IAAAc,EAAAI,OAAAwB,EAAA5B,YACAA,EAAAgC,MAAAd,EAAAhC,KAAA+C,WACAL,EAAA1B,SAAA,EACA0B,EAAA5B,cAEA,SAAA0B,OAKAQ,kBA7CA,SA6CAlC,GAEAc,KAAAd,WAAAuB,QAAAvB,EAAAuB,QACAT,KAAAW,eAAAzB,EAAAuB,UAEAY,WAlDA,SAkDAC,GAEAtB,KAAAC,OAAAC,SAAA,aAAAF,KAAAd,WAAAuB,SACAT,KAAAuB,QAAAC,MAAAC,KAAA,sBAAAV,QAAAO,cAIAI,QAxGA,WAyGA1B,KAAAF,gBC5Ie6B,GADEC,OAFjB,WAA0B,IAAAC,EAAA7B,KAAa8B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,gBAA0BF,EAAA,wBAA6BG,OAAO9D,SAAAwD,EAAAxD,YAAyBwD,EAAAO,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,QAAkBF,EAAA,WAAgBG,OAAO5D,QAAAsD,EAAAtD,QAAA8D,WAAAR,EAAA5C,YAAAC,WAAA2C,EAAA3C,WAAAE,QAAAyC,EAAAzC,SAAqGkD,IAAKC,OAAAV,EAAAT,mBAA+BzC,YAAAkD,EAAAW,KAAsB3D,IAAA,MAAA4D,GAAA,SAAAC,GAA4B,OAAAV,EAAA,OAAkBE,YAAA,eAAyBF,EAAA,OAAYG,OAAOQ,IAAAd,EAAAjC,SAAA8C,YAAkC7D,IAAA,aAAA4D,GAAA,SAAAC,GAAmC,OAAAb,EAAAO,GAAAP,EAAAe,GAAAf,EAAAgB,MAAAC,eAAAJ,SAA2D7D,IAAA,SAAA4D,GAAA,SAAAC,GAA+B,OAAAV,EAAA,QAAmBE,YAAA,eAAyBF,EAAA,QAAae,MAAA,WAAAL,EAAA,sBAA0CV,EAAA,KAAUE,YAAA,uBAA+BL,EAAAO,GAAA,aAAAP,EAAAe,GAAAF,GAAA,kBAAuD7D,IAAA,YAAA4D,GAAA,SAAAC,EAAApB,EAAA0B,GAA+C,kBAAA1B,EAAA2B,OAAAjB,EAAA,QAA8CE,YAAA,gBAAAI,IAAgCY,MAAA,SAAAC,GAAyB,OAAAtB,EAAAR,WAAAC,OAAgCU,EAAA,KAAUE,YAAA,gCAAwCL,EAAAuB,aAAkB,QAEtkCC,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACErF,EACAwD,GATF,EAEA,KAEA,KAEA,MAUe8B,EAAA,QAAAH,EAAiB","file":"static/js/31.c3146b59783772fed8fa.js","sourcesContent":["<template>\n    <div class=\"showContent\">\n        <requestAndHisSubMenu :routekey=\"routekey\"></requestAndHisSubMenu>\n        <div class=\"box\">\n          <a-table\n        :columns=\"columns\"\n        :dataSource=\"requestList\"\n        :pagination=\"pagination\"\n        :loading=\"loading\"\n        @change=\"handleTableChange\"\n      >\n        <template slot=\"img\" slot-scope=\"text\">\n          <div class=\"ocrImgCell\">\n            <img :src=\"getImage(text)\" >\n          </div>\n        </template>\n        <template slot=\"created_at\" slot-scope=\"text\">{{$util.timestampToDay(text)}}</template>\n        <template slot=\"status\" slot-scope=\"text\">\n          <span class=\"statusSpan\">\n            <span :class=\"text=='success'?'greenDot':'redDot'\">\n              <i class=\"iconfont amd-dot\"></i>\n            </span>\n            {{text}}\n          </span>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text,record,index\">\n            <span v-if=\"record.status=='success'\" @click=\"gotoDetail(record)\" class=\"historyDetail\"><i class=\"iconfont amd-arrows_right\"></i></span>\n        </template>\n      </a-table>\n        </div>\n    </div>\n    \n</template>\n<script>\nimport requestAndHisSubMenu from \"@/components/requestAndHisSubMenu\";\nimport { mapGetters } from \"vuex\";\nimport { fail } from 'assert';\nimport Cookies from \"@/js/cookies\";\nexport default {\n  data() {\n    const columns = [\n      {\n        title: \"Face Comparison\",\n        dataIndex: \"request.image_file\",\n        align: \"center\",\n        scopedSlots: { customRender: \"img\" }\n      },\n      {\n        title: \"Upload Time\",\n        dataIndex: \"created_at\",\n        align: \"center\",\n        scopedSlots: { customRender: \"created_at\" }\n      },\n      {\n        title: \"Status\",\n        dataIndex: \"status\",\n        align: \"center\",\n        scopedSlots: { customRender: \"status\" }\n      },\n      {\n        title: \"\",\n        key: \"action\",\n        align: \"center\",\n        width:'50px',\n        scopedSlots: { customRender: \"operation\" }\n      }\n    ];\n    return {\n        routekey:[\"idCard\",\"idCardHistory\"],\n        history:[],\n        columns,\n        historyKey: \"app/v1/ocr/recognition/indonesia-ktp\",\n        serviceApiId:'',\n        requestList:[],\n        pagination: { pageSize: 10 },\n        loading:false,\n\n    };\n  },\n  computed: {\n    ...mapGetters([\"apiHistoryList\",'listPage'])\n  },\n  components: {\n    requestAndHisSubMenu\n  },\n  methods:{\n    getImage(url) {\n      let imageFront = \"http://kotadata.oss-ap-southeast-5.aliyuncs.com\";\n      return imageFront + url;\n    },\n    getApiList() {\n      this.$store.dispatch(\"getApiList\", {}).then(\n        res => {\n          let historyItem = this.apiHistoryList[this.historyKey];\n          this.serviceApiId = historyItem._id;\n          if(this.listPage){\n            console.log(this.listPage);\n            this.pagination.current=Number(this.listPage);\n            this.getRequestlist(this.listPage);            \n          }else{\n            this.getRequestlist(1);\n          }\n        },\n        error => {\n          console.log(\"getLog error:\", error);\n        }\n      );\n    },\n    getRequestlist(currentPage) {\n      let params = {\n        serviceApiId: this.serviceApiId,\n        page: currentPage,\n        pageSize: this.pageSize,\n        showFullLoading: currentPage == 1 ? true : false //只要加载第一页的时候全局loading\n      };\n      this.loading = true;\n      this.$store.dispatch(\"getLog\", params).then(\n        res => {\n          console.log(res);\n           this.requestList=res.data.data;\n          const pagination = { ...this.pagination };\n          pagination.total = res.data.totalCount;\n          this.loading = false;\n          this.pagination = pagination;\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    },\n    handleTableChange(pagination) {\n      // Cookies.set('historyCurrentPage',pagination.current);\n      this.pagination.current = pagination.current;\n      this.getRequestlist(pagination.current);\n    },\n    gotoDetail(record){\n      console.log(record);\n      this.$store.dispatch(\"changePage\", this.pagination.current);\n      this.$router.push({name:'idCardHistoryDetail',params:{record}})\n    },\n    \n  },\n  created() {\n    this.getApiList();\n  }\n};\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/ocr/idCardHistory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"showContent\"},[_c('requestAndHisSubMenu',{attrs:{\"routekey\":_vm.routekey}}),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.requestList,\"pagination\":_vm.pagination,\"loading\":_vm.loading},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"img\",fn:function(text){return [_c('div',{staticClass:\"ocrImgCell\"},[_c('img',{attrs:{\"src\":_vm.getImage(text)}})])]}},{key:\"created_at\",fn:function(text){return [_vm._v(_vm._s(_vm.$util.timestampToDay(text)))]}},{key:\"status\",fn:function(text){return [_c('span',{staticClass:\"statusSpan\"},[_c('span',{class:text=='success'?'greenDot':'redDot'},[_c('i',{staticClass:\"iconfont amd-dot\"})]),_vm._v(\"\\n        \"+_vm._s(text)+\"\\n      \")])]}},{key:\"operation\",fn:function(text,record,index){return [(record.status=='success')?_c('span',{staticClass:\"historyDetail\",on:{\"click\":function($event){return _vm.gotoDetail(record)}}},[_c('i',{staticClass:\"iconfont amd-arrows_right\"})]):_vm._e()]}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0006621c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/ocr/idCardHistory.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./idCardHistory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./idCardHistory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0006621c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./idCardHistory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/ocr/idCardHistory.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}