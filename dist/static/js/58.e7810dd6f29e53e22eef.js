webpackJsonp([58],{E8Z1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={data:function(){return{visible:!1,addDepartmentForm:{sortOrder:"",name:"",pidName:"",status:!0},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},dialogTitle:"",errorName:!1,handelType:0,parentNode:"",departmentId:""}},inject:["reload"],methods:{showModal:function(e,t){this.visible=!0,this.handelType=e,0==e?(this.dialogTitle="新增部门",this.parentNode=t,this.addDepartmentForm.pidName=t.parentNodeName,this.addDepartmentForm.sortOrder=t.departmentLength+1):2==e&&(this.dialogTitle="修改部门",this.parentNode=t.parentNode,this.departmentId=t.row.id,this.addDepartmentForm.name=t.row.name,this.addDepartmentForm.status=0==t.row.status,this.addDepartmentForm.sortOrder=t.row.sortOrder,this.addDepartmentForm.pidName=t.parentNode.parentNodeName)},closeDialog:function(){this.visible=!1,this.$refs.addDepartmentForm.resetFields(),this.errorName=!1},focusName:function(){this.errorName=!1},addOrEditDepartment:function(e){var t=this;this.$refs[e].validate(function(e){e&&!t.errorName&&t.departmentNameRepeat()})},departmentNameRepeat:function(){var e=this,t={oid:this.parentNode.parentNodeId,name:this.addDepartmentForm.name};this.$store.dispatch("hasDepartmentName",t).then(function(t){t.data.id?e.errorName=!0:e.addOrEditDepartmentSure()},function(e){})},addOrEditDepartmentSure:function(){var e=this;this.addDepartmentForm.oid=this.parentNode.parentNodeId,this.addDepartmentForm.id=0==this.handelType?"":this.departmentId,this.addDepartmentForm,this.$store.dispatch("addDepartment",this.addDepartmentForm).then(function(t){e.$emit("getAllOrgan2",e.addDepartmentForm.oid),e.$message({type:"success",message:0==e.handelType?"添加成功!":"修改成功"}),e.visible=!1},function(e){})},getOrganDetail:function(e){}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.visible,"close-on-click-modal":!1,width:"35%"},on:{"update:visible":function(t){e.visible=t},close:e.closeDialog}},[a("el-form",{ref:"addDepartmentForm",staticClass:"errorTipForm",attrs:{model:e.addDepartmentForm,rules:e.rules,"label-width":"80px"}},[a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[a("el-input",{on:{focus:e.focusName},model:{value:e.addDepartmentForm.name,callback:function(t){e.$set(e.addDepartmentForm,"name",t)},expression:"addDepartmentForm.name"}})],1),e._v(" "),e.errorName?a("span",{staticClass:"errorInput"},[e._v("该部门名称已存在")]):e._e()],1),e._v(" "),a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"所属机构",prop:"pidName"}},[a("el-input",{model:{value:e.addDepartmentForm.pidName,callback:function(t){e.$set(e.addDepartmentForm,"pidName",t)},expression:"addDepartmentForm.pidName"}})],1)],1),e._v(" "),a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"序号",prop:"sortOrder"}},[a("el-input",{model:{value:e.addDepartmentForm.sortOrder,callback:function(t){e.$set(e.addDepartmentForm,"sortOrder",t)},expression:"addDepartmentForm.sortOrder"}})],1)],1),e._v(" "),a("div",{staticClass:"item"},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-switch",{attrs:{"active-color":"#4573D0"},model:{value:e.addDepartmentForm.status,callback:function(t){e.$set(e.addDepartmentForm,"status",t)},expression:"addDepartmentForm.status"}})],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrEditDepartment("addDepartmentForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,i,!1,function(e){a("rxiX")},null,null);t.default=d.exports},rxiX:function(e,t){}});
//# sourceMappingURL=58.e7810dd6f29e53e22eef.js.map