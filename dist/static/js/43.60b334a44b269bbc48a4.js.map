{"version":3,"sources":["webpack:///src/page/sys/role-manage/addEditRole.vue","webpack:///./src/page/sys/role-manage/addEditRole.vue?5c34","webpack:///./src/page/sys/role-manage/addEditRole.vue","webpack:///src/page/sys/role-manage/bindOrgan.vue","webpack:///./src/page/sys/role-manage/bindOrgan.vue?0b8a","webpack:///./src/page/sys/role-manage/bindOrgan.vue","webpack:///src/page/sys/role-manage/roleManage.vue","webpack:///./src/page/sys/role-manage/roleManage.vue?2ff4","webpack:///./src/page/sys/role-manage/roleManage.vue","webpack:///src/page/sys/role-manage/bindMenu.vue","webpack:///./src/page/sys/role-manage/bindMenu.vue?cfa9","webpack:///./src/page/sys/role-manage/bindMenu.vue"],"names":["addEditRole","data","visible","addRoleForm","name","description","rules","required","message","trigger","dialogTitle","errorOrganName","handelType","editRoleId","inject","methods","showModal","type","this","id","closeDialog","$refs","resetFields","focusOrganName","blurOrganName","_this","addOrganForm","$store","dispatch","then","res","err","addOrEditRole","formName","_this2","validate","valid","$message","reload","getOrganDetail","role_manage_addEditRole","render","_vm","_h","$createElement","_c","_self","attrs","title","close-on-click-modal","width","on","update:visible","$event","close","ref","model","label-width","staticClass","label","prop","value","callback","$$v","$set","expression","_v","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","bindOrgan","organData","defaultProps","children","roleId","getOrgan","getRoleBindOrgan","organIds","forEach","item","push","organId","organTree","setCheckedKeys","bindOrganSure","_this3","getCheckedKeys","openDialog","created","role_manage_bindOrgan","top","open","show-checkbox","default-expand-all","node-key","highlight-current","props","roleManage","tableData","dicSearchForm","currentPage","pageSize","totalPage","components","bindMenu","editRole","row","addEditRoleRef","deleteRole","$confirm","confirmButtonText","cancelButtonText","catch","handleSizeChange","val","getSelectOrgan","handleCurrentChange","getRoles","current","size","records","total","addRole","bindMenuRef","bindOrganRef","role_manage_roleManage","inline","placeholder","icon","staticStyle","stripe","height","align","fixed","scopedSlots","_u","key","fn","scope","current-page","background","page-sizes","layout","size-change","current-change","ssrContext","menuData","getMenu","getRoleBindMenu","permissionIds","permissionId","menuTree","role_manage_bindMenu"],"mappings":"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","file":"static/js/43.60b334a44b269bbc48a4.js","sourcesContent":["<template>\n  <el-dialog\n    :title=\"dialogTitle\"\n    :visible.sync=\"visible\"\n    @close=\"closeDialog\"\n    :close-on-click-modal=\"false\"\n    width=\"35%\"\n  >\n    <el-form :model=\"addRoleForm\" :rules=\"rules\" ref=\"addRoleForm\" label-width=\"80px\">\n      <div class=\"item\">\n        <el-form-item label=\"角色名称\" prop=\"name\">\n          <el-input v-model=\"addRoleForm.name\"></el-input>\n        </el-form-item>\n        <!-- <span class=\"errorInput\" v-if=\"errorOrganName\">该机构名称已存在</span> -->\n      </div>\n      <div class=\"item\">\n        <el-form-item label=\"角色介绍\" prop=\"description\">\n          <el-input v-model=\"addRoleForm.description\"></el-input>\n        </el-form-item>\n      </div>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"addOrEditRole('addRoleForm')\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      visible: false,\n      addRoleForm: {\n        name: \"\",\n        description: \"\"\n      },\n      rules: {\n        name: [{ required: true, message: \"请输入角色名称\", trigger: \"blur\" }]\n      },\n      dialogTitle: \"\", //弹出框title\n      errorOrganName: false, //添加organname时的验证\n      handelType: 0, //添加 0  修改2\n      editRoleId:'',\n    };\n  },\n  inject: [\"reload\"],\n  methods: {\n    showModal(type, data) {\n      this.visible = true;\n      this.handelType = type;\n      if (type == 0) {\n        this.dialogTitle = \"新增角色\";\n\n        // this.parentNode = data;\n        // this.addOrganForm.pidName = data.parentNodeName;\n        // this.isDisabled = false;\n      } else if (type == 2) {\n        console.log(data);\n        this.dialogTitle = \"修改角色\";\n        this.addRoleForm.name = data.name;\n        this.addRoleForm.description = data.description;\n        this.editRoleId = data.id;\n        // this.organId = data.id;\n        // this.parentNode = data.parentNode;\n        // this.getOrganDetail(data.id);\n        // this.isDisabled = false;\n      }\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      this.$refs[\"addRoleForm\"].resetFields();\n      //this.errorOrganName = false;\n    },\n    //聚焦清除错误信息\n    focusOrganName() {\n      this.errorOrganName = false;\n    },\n    //失去焦点请求 名称是否重复\n    blurOrganName() {\n      if (this.addOrganForm.name) {\n        this.$store.dispatch(\"hasOrganName\", this.addOrganForm.name).then(\n          res => {\n            console.log(res);\n            if (res.data.id) {\n              this.errorOrganName = true;\n            } else {\n              this.errorOrganName = false;\n            }\n          },\n          err => {\n            console.log(err);\n          }\n        );\n      }\n    },\n    //新增角色 修改角色\n    addOrEditRole(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid && !this.errorOrganName) {\n          // this.addOrganForm.pid = this.parentNode.parentNodeId;\n          // this.addOrganForm.id = this.handelType == 0 ? \"\" : this.organId;\n          // console.log(\"数据\", this.addOrganForm);\n          if (this.handelType) {\n            //修改\n            this.addRoleForm.id= this.editRoleId;\n            this.$store.dispatch(\"editRole\", this.addRoleForm).then(\n              res => {\n                console.log(\"角色\", res);\n                this.$message({\n                  type: \"success\",\n                  message: \"修改成功\"\n                });\n                this.visible = false;\n                this.reload();\n              },\n              err => {\n                console.log(err);\n              }\n            );\n          } else {\n            this.$store.dispatch(\"addRole\", this.addRoleForm).then(\n              res => {\n                console.log(\"角色\", res);\n                this.$message({\n                  type: \"success\",\n                  message:\"添加成功!\" \n                });\n                this.visible = false;\n                this.reload();\n              },\n              err => {\n                console.log(err);\n              }\n            );\n          }\n        }\n      });\n    },\n    //获取机构详情\n    getOrganDetail(id) {}\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/addEditRole.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.dialogTitle,\"visible\":_vm.visible,\"close-on-click-modal\":false,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.closeDialog}},[_c('el-form',{ref:\"addRoleForm\",attrs:{\"model\":_vm.addRoleForm,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"角色名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.name),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"name\", $$v)},expression:\"addRoleForm.name\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"角色介绍\",\"prop\":\"description\"}},[_c('el-input',{model:{value:(_vm.addRoleForm.description),callback:function ($$v) {_vm.$set(_vm.addRoleForm, \"description\", $$v)},expression:\"addRoleForm.description\"}})],1)],1)]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addOrEditRole('addRoleForm')}}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3a4533d0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/addEditRole.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addEditRole.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addEditRole.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3a4533d0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addEditRole.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/addEditRole.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog\n    title=\"绑定机构\"\n    :visible.sync=\"visible\"\n    @close=\"closeDialog\"\n    @open=\"openDialog\"\n    :close-on-click-modal=\"false\"\n    width=\"35%\"\n    top=\"30px\"\n  >\n    <div>\n      <el-tree\n        :data=\"organData\"\n        show-checkbox\n        default-expand-all\n        node-key=\"id\"\n        ref=\"organTree\"\n        highlight-current\n        :props=\"defaultProps\"\n      ></el-tree>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"bindOrganSure()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      visible: false,\n      organData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      roleId: \"\"\n    };\n  },\n  methods: {\n    showModal(roleId) {\n      this.visible = true;\n      this.roleId = roleId;\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      //this.$refs[\"addRoleForm\"].resetFields();\n    },\n    //获取机构\n    getOrgan() {\n      this.$store.dispatch(\"getAllOrgan\").then(\n        res => {\n          this.organData = res.data;\n          this.getRoleBindOrgan();\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //查询角色下绑定的机构\n    getRoleBindOrgan() {\n      this.$store.dispatch(\"getRoleBindOrgan\", this.roleId).then(\n        res => {\n          console.log(\"角色下绑定的菜单权限\", res);\n          let organIds = [];\n          res.data.forEach(item => {\n            organIds.push(item.organId);\n          });\n          this.$refs.organTree.setCheckedKeys(organIds);\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //绑定机构\n    bindOrganSure() {\n      console.log(this.$refs.organTree.getCheckedKeys());\n      let data = {\n        roleId: this.roleId,\n        organIds: this.$refs.organTree.getCheckedKeys()\n      };\n      this.$store.dispatch(\"roleBindOrgan\", data).then(\n        res => {\n          console.log(\"绑定\", res);\n          this.visible = false;\n          this.$message({\n            type: \"success\",\n            message: \"绑定成功\"\n          });\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    openDialog() {\n      this.getOrgan();\n    }\n  },\n  created() {}\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/bindOrgan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"绑定机构\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"width\":\"35%\",\"top\":\"30px\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.closeDialog,\"open\":_vm.openDialog}},[_c('div',[_c('el-tree',{ref:\"organTree\",attrs:{\"data\":_vm.organData,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.bindOrganSure()}}},[_vm._v(\"确 定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ca41333\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/bindOrgan.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindOrgan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindOrgan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ca41333\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bindOrgan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/bindOrgan.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"com_searchAndpageBoxPadding\">\n    <div class=\"searchAndpageBox\" id=\"roleBox\">\n      <div class=\"handlePart\">\n        <div class=\"search\">\n          <el-form :inline=\"true\" :model=\"dicSearchForm\" class>\n            <el-form-item label=\"角色名称\">\n              <el-input v-model=\"dicSearchForm.name\" placeholder=\"输入角色名称\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" size=\"medium\" icon=\"el-icon-search\" @click=\"getRoles\">查询</el-button>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" size=\"medium\" icon=\"el-icon-plus\" @click=\"addRole\">添加角色</el-button>\n            </el-form-item>\n          </el-form>\n        </div>\n      </div>\n      <div class=\"tablePart\">\n        <el-table :data=\"tableData\" stripe style=\"width: 100%\" height=\"100%\">\n          <el-table-column prop=\"name\" label=\"角色名称\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"description\" label=\"角色介绍\" align=\"center\"></el-table-column>\n          <el-table-column prop=\"createTime\" label=\"创建时间\" align=\"center\"></el-table-column>\n          <el-table-column fixed=\"right\" label=\"操作\" align=\"center\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"text\" @click=\"bindMenu(scope.row.id)\">菜单权限</el-button>\n              <el-button type=\"text\" @click=\"bindOrgan(scope.row.id)\">绑定机构</el-button>\n              <el-button @click=\"editRole(scope.row)\" type=\"text\">编辑</el-button>\n              <el-button type=\"text\" @click=\"deleteRole(scope.row.id)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n      <div class=\"paginationBox\">\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          background\n          :page-sizes=\"[10, 20, 30, 40]\"\n          layout=\"prev, pager, next,sizes,jumper\"\n          :total=\"totalPage\"\n        ></el-pagination>\n      </div>\n      <addEditRole ref=\"addEditRoleRef\"></addEditRole>\n      <bindMenu ref=\"bindMenuRef\"></bindMenu>\n      <bindOrgan ref=\"bindOrganRef\"></bindOrgan>\n    </div>\n  </div>\n</template>\n<script>\nimport addEditRole from \"./addEditRole\";\nimport bindMenu from \"./bindMenu\";\nimport bindOrgan from \"./bindOrgan\";\nexport default {\n  data() {\n    return {\n      tableData: [], //表格数据\n      dicSearchForm: {\n        name: \"\"\n      },\n      currentPage: 1, //当前页\n      pageSize: 10, //pagesize\n      totalPage: 0 //总页数\n    };\n  },\n  components: {\n    addEditRole,\n    bindMenu,\n    bindOrgan\n  },\n  inject: [\"reload\"],\n  methods: {\n    //编辑角色\n    editRole(row) {\n      this.$refs.addEditRoleRef.showModal(2, row);\n    },\n    //删除角色\n    deleteRole(id) {\n      this.$confirm(\"确认删除该角色?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          this.$store.dispatch(\"deleteRole\", id).then(\n            res => {\n              this.$message({\n                type: \"success\",\n                message: \"删除成功!\"\n              });\n              this.reload();\n            },\n            err => {\n              console.log(err);\n            }\n          );\n        })\n        .catch(() => {});\n    },\n    //更改每页显示的条数\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.currentPage = 1;\n      this.getSelectOrgan();\n    },\n    //更换页码\n    handleCurrentChange(val) {\n      this.currentPage = val;\n      this.getSelectOrgan();\n    },\n    //获取角色\n    getRoles() {\n      let data = {\n        current: this.currentPage,\n        size: this.pageSize,\n        name: this.dicSearchForm.name\n      };\n      this.$store.dispatch(\"getRoles\", data).then(\n        res => {\n          console.log(\"角色列表\", res);\n          this.tableData = res.data.records;\n          this.totalPage = res.data.total;\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //添加角色\n    addRole() {\n      this.$refs.addEditRoleRef.showModal(0, \"\");\n    },\n    //绑定菜单权限\n    bindMenu(roleId) {\n      this.$refs.bindMenuRef.showModal(roleId);\n    },\n    //角色绑定机构\n    bindOrgan(roleId) {\n      this.$refs.bindOrganRef.showModal(roleId);\n    }\n  },\n  created() {\n    this.getRoles();\n  }\n};\n</script>\n\n<style lang=\"less\">\n@import \"../../../css/systemManage.less\";\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/roleManage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"com_searchAndpageBoxPadding\"},[_c('div',{staticClass:\"searchAndpageBox\",attrs:{\"id\":\"roleBox\"}},[_c('div',{staticClass:\"handlePart\"},[_c('div',{staticClass:\"search\"},[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.dicSearchForm}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入角色名称\"},model:{value:(_vm.dicSearchForm.name),callback:function ($$v) {_vm.$set(_vm.dicSearchForm, \"name\", $$v)},expression:\"dicSearchForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getRoles}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"medium\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addRole}},[_vm._v(\"添加角色\")])],1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"tablePart\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"stripe\":\"\",\"height\":\"100%\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"角色名称\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"角色介绍\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"fixed\":\"right\",\"label\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.bindMenu(scope.row.id)}}},[_vm._v(\"菜单权限\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.bindOrgan(scope.row.id)}}},[_vm._v(\"绑定机构\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.editRole(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row.id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"paginationBox\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"background\":\"\",\"page-sizes\":[10, 20, 30, 40],\"layout\":\"prev, pager, next,sizes,jumper\",\"total\":_vm.totalPage},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('addEditRole',{ref:\"addEditRoleRef\"}),_vm._v(\" \"),_c('bindMenu',{ref:\"bindMenuRef\"}),_vm._v(\" \"),_c('bindOrgan',{ref:\"bindOrganRef\"})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c12e89aa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/roleManage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c12e89aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./roleManage.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./roleManage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c12e89aa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./roleManage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/roleManage.vue\n// module id = null\n// module chunks = ","<template>\n  <el-dialog\n    title=\"绑定菜单\"\n    :visible.sync=\"visible\"\n    @close=\"closeDialog\"\n    @open=\"openDialog\"\n    :close-on-click-modal=\"false\"\n    width=\"35%\"\n    top=\"30px\"\n  >\n    <div>\n      <el-tree\n        :data=\"menuData\"\n        show-checkbox\n        default-expand-all\n        node-key=\"id\"\n        ref=\"menuTree\"\n        highlight-current\n        :props=\"defaultProps\"\n      ></el-tree>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"bindMenu()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      visible: false,\n      menuData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"title\"\n      },\n      roleId: \"\"\n    };\n  },\n  methods: {\n    showModal(roleId) {\n      this.visible = true;\n      this.roleId = roleId;\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      //this.$refs[\"addRoleForm\"].resetFields();\n    },\n    //获取菜单\n    getMenu() {\n      this.$store.dispatch(\"getTreePermission\").then(\n        res => {\n          console.log(\"获取菜单\", res);\n          this.menuData = res.data;\n          this.getRoleBindMenu();\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //查询角色下绑定的菜单权限\n    getRoleBindMenu(){\n      this.$store.dispatch(\"getRoleBindMenu\",this.roleId).then(\n        res => {\n          console.log('角色下绑定的菜单权限',res);\n          let permissionIds=[];\n          res.data.forEach(item => {\n            permissionIds.push(item.permissionId);\n          });\n          this.$refs.menuTree.setCheckedKeys(permissionIds);\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //绑定菜单\n    bindMenu() {\n      console.log(this.$refs.menuTree.getCheckedKeys());\n      let data = {\n          roleId:this.roleId,\n          permissionIds:this.$refs.menuTree.getCheckedKeys()\n      }\n      this.$store.dispatch(\"roleBindMenu\", data).then(\n        res => {\n          console.log(\"绑定\", res);\n          this.visible = false;\n          this.$message({\n            type: \"success\",\n            message: \"绑定成功\"\n          });\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    openDialog(){\n      this.getMenu();\n    }\n  },\n  created() {\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/bindMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"绑定菜单\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"width\":\"35%\",\"top\":\"30px\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.closeDialog,\"open\":_vm.openDialog}},[_c('div',[_c('el-tree',{ref:\"menuTree\",attrs:{\"data\":_vm.menuData,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.bindMenu()}}},[_vm._v(\"确 定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-174ef76b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/bindMenu.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-174ef76b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bindMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/bindMenu.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}