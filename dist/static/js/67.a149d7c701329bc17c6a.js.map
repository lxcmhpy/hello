{"version":3,"sources":["webpack:///./src/js/validator.js","webpack:///src/page/sys/user-manage/addUser.vue","webpack:///./src/page/sys/user-manage/addUser.vue?5856","webpack:///./src/page/sys/user-manage/addUser.vue"],"names":["Vue","validatePhone","rule","value","callback","test","Error","validateIDNumber","addUser","data","_this","this","depss","visible","titleMap","addEquipment","editEquipment","dialogStatus","parentNode","getOrganList","departments","addUserForm","id","username","password","mobile","nickName","IDnumber","category","organId","organTitle","departmentId","departmentTitle","Provincial","Ministerial","Maritime","Other","rules","required","message","trigger","min","validator","$store","dispatch","then","response","catch","error","rowData","mounted","methods","showModal","_this2","$nextTick","$refs","resetFields","getCurrentOrganAndChild","closeDialog","handelEdit","parentNodeId","parentNodeName","userDeparment","_this3","res","err","getDepartment","data1","_this4","save","_this5","validate","valid","$message","showClose","type","$emit","resetForm","_this6","watch","val","user_manage_addUser","render","_vm","_h","$createElement","_c","_self","attrs","title","custom-class","top","width","close-on-click-modal","on","update:visible","$event","ref","staticClass","model","label-width","close","_v","label","prop","disabled","$$v","$set","expression","placeholder","change","_l","item","key","name","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/67.a149d7c701329bc17c6a.js","sourcesContent":["//公用验证方法\nimport Vue from \"vue\";\nconst vm = new Vue();\n\n/* 是否是特殊字符*/\nexport function isSpecialChar(rule, value, callback) {\n    const reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+$/;\n    if (value.length > 0 && !reg.test(value)) {\n        return callback(new Error(\"不可输入特殊字符\"));\n    } else {\n        callback();\n    }\n}\n\n/** 验证是否整数 请输入整数 */\nexport function numType(rule, value, callback) {\n    var re = /^[1-9]([0-9])*$/;\n    if (!re.test(value)) {\n        callback(new Error('请输入整数'));\n    } else {\n        callback();\n    }\n}\n\n/* 是否是邮箱*/\nexport function validateEmail(rule, value, callback) {\n    var reg = /^([a-zA-Z0-9_\\.\\-])+\\@(([a-zA-Z0-9\\-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n    if (!reg.test(value)) {\n        callback(new Error('邮箱'));\n    }\n    callback();\n}\n\n/**验证密码至少6位 */\nexport function validatePassLenght(rule, value, callback) {\n    if (value.length < 6) {\n        callback(new Error('changdu'));\n    } else if (value.length > 16) {\n        callback(new Error('changdu'));\n    }\n    callback();\n}\n\n/* 是否是邮箱*/\nexport function validateUrl(rule, value, callback) {\n  var reg = /^((ht|f)tps?):\\/\\/([\\w\\-]+(\\.[\\w\\-]+)*\\/)*[\\w\\-]+(\\.[\\w\\-]+)*\\/?(\\?([\\w\\-\\.,@?^=%&:\\/~\\+#]*)+)?/;\n  if (!reg.test(value)) {\n      callback(new Error('url格式错误'));\n  }\n  callback();\n}\n\n/* 是否是手机号 有值时验证*/\nexport function validatePhone(rule, value, callback) {\n    var reg = /^1(3|4|5|6|7|8)\\d{9}$/;\n    if (!reg.test(value) && value) {\n        callback(new Error('手机号格式错误'));\n    }\n    callback();\n  }\n\n/* 是否是身份证号码   有值时验证*/\nexport function validateIDNumber(rule, value, callback) {\n    var reg = /(^\\d{8}(0\\d|10|11|12)([0-2]\\d|30|31)\\d{3}$)|(^\\d{6}(18|19|20)\\d{2}(0\\d|10|11|12)([0-2]\\d|30|31)\\d{3}(\\d|X|x)$)/;\n    if (!reg.test(value) && value) {\n        callback(new Error('身份证格式错误'));\n    }\n    callback();\n  }\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/validator.js","<template>\n  <el-dialog\n    :title=\"titleMap[dialogStatus]\"\n    custom-class=\"leftDialog\"\n    :visible.sync=\"visible\"\n    top=\"0\"\n    width=\"40%\"\n    :close-on-click-modal=\"false\"\n  >\n    <el-form\n      :model=\"addUserForm\"\n      :rules=\"rules\"\n      ref=\"addUserForm\"\n      label-width=\"100px\"\n      class=\"addOrganClass\"\n      @close=\"closeDialog\"\n      :close-on-click-modal=\"false\"\n    >\n      <div class=\"part\">\n        <p class=\"titleP\">登录信息</p>\n        <div class=\"item\">\n          <el-form-item label=\"登录用户名\" prop=\"username\">\n            <el-input\n              ref=\"username\"\n              :disabled=\"dialogStatus === 'editEquipment'\"\n              v-model=\"addUserForm.username\"\n            ></el-input>\n          </el-form-item>\n        </div>\n        <!-- <div class=\"item\" v-if=\"dialogStatus === 'addEquipment'\">\n          <el-form-item label=\"初始密码\" prop=\"password\">\n            <el-input ref=\"password\" ></el-input>\n          </el-form-item>\n        </div>-->\n      </div>\n      <div class=\"part\">\n        <p class=\"titleP\">基本信息</p>\n        <div class=\"item\">\n          <el-form-item label=\"真实姓名\">\n            <el-input v-model=\"addUserForm.nickName\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"身份证号码\" prop=\"IDnumber\">\n            <el-input ref=\"IDnumber\" v-model=\"addUserForm.IDnumber\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"联系方式\" prop=\"mobile\">\n            <el-input ref=\"mobile\" v-model=\"addUserForm.mobile\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"执法门类\">\n            <el-input v-model=\"addUserForm.category\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"执法机构\" prop=\"organId\">\n            <!-- <el-input v-model=\"addUserForm.organTitle\"></el-input> -->\n            <el-select v-model=\"addUserForm.organId\" placeholder=\"请选择执法机构\" @change=\"getDepartment\">\n              <el-option\n                v-for=\"item in getOrganList\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"所属部门\" prop=\"departmentId\">\n            <el-select v-model=\"addUserForm.departmentId\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in departments\"\n                :key=\"item.id\"\n                :label=\"item.name\"\n                :value=\"item.id\"\n              ></el-option>\n            </el-select>\n          </el-form-item>\n        </div>\n      </div>\n      <div class=\"part\">\n        <p class=\"titleP\">证件信息</p>\n        <div class=\"item\">\n          <el-form-item label=\"省级证件号\">\n            <el-input v-model=\"addUserForm.Provincial\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"部级证件号\">\n            <el-input v-model=\"addUserForm.Ministerial\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"海事证件号\">\n            <el-input v-model=\"addUserForm.Maritime\"></el-input>\n          </el-form-item>\n        </div>\n        <div class=\"item\">\n          <el-form-item label=\"其他证件号\">\n            <el-input v-model=\"addUserForm.Other\"></el-input>\n          </el-form-item>\n        </div>\n      </div>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"resetForm\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"save\">保存</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nimport { validatePhone, validateIDNumber } from \"@/js/validator\";\nexport default {\n  data() {\n    // 判断用户名是否已存在\n    var validateUsername = (rule, value, callback) => {\n      this.$store\n        .dispatch(\"hasUsername\", value)\n        .then(response => {\n          callback();\n        })\n        .catch(error => {\n          callback('用户名重复');\n        });\n    };\n    return {\n      depss: [], //数据部门数据\n      visible: false,\n      //新增or编辑弹框标题(根据点击的新增or编辑按钮显示不同的标题)\n      titleMap: {\n        addEquipment: \"新增用户\",\n        editEquipment: \"编辑用户\"\n      },\n      //新增和编辑弹框标题\n      dialogStatus: \"\",\n      parentNode: \"\", //新增用户时默认的上级机构\n      getOrganList: [], //获取机构级下级机构\n      departments: [], //切换机构获取部门\n      addUserForm: {\n        id: \"\",\n        username: \"\",\n        password: \"123456\",\n        mobile: \"\",\n        nickName: \"\",\n        IDnumber: \"\",\n        category: \"\",\n        organId: \"\",\n        organTitle: \"\",\n        departmentId: \"\",\n        departmentTitle: \"\",\n        Provincial: \"\",\n        Ministerial: \"\",\n        Maritime: \"\",\n        Other: \"\"\n      },\n      rules: {\n        username: [\n          { required: true, message: \"请输入登录用户名\", trigger: \"blur\" },\n          { min: 6, message: \"长度大于6个字符\", trigger: \"blur\" },\n          { validator: validateUsername, trigger: \"blur\" },\n        ],\n        mobile: [{ validator: validatePhone, trigger: \"blur\" }],\n        organId: [{ required: true, message: \"请选择机构\", trigger: \"change\" }],\n        // departmentId: [\n        //   { required: true, message: \"请选择部门\", trigger: \"change\" }\n        // ],\n        IDnumber: [{ validator: validateIDNumber, trigger: \"blur\" }]\n      },\n      rowData:'',\n    };\n  },\n  mounted() {},\n\n  methods: {\n    //新增\n    showModal(data) {\n      //显示弹框\n      this.visible = true;\n      this.dialogStatus = \"addEquipment\";\n      //新增弹框标题\n      this.$nextTick(() => {\n        this.$refs[\"addUserForm\"].resetFields();\n      });\n      this.parentNode = data;\n      this.getCurrentOrganAndChild();\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      // this.$nextTick(() => {\n      //   this.$refs[\"addUserForm\"].resetFields();\n      // });\n      this.$refs[\"addUserForm\"].resetFields();\n    },\n    //编辑\n    handelEdit(data) {\n      console.log(data);\n      //显示弹框\n      this.visible = true;\n      //编辑弹框标题\n      this.dialogStatus = \"editEquipment\";\n      this.parentNode={\n        parentNodeId:data.organId,\n        parentNodeName:data.userDeparment\n      };\n      this.getCurrentOrganAndChild();\n      this.rowData = data;\n    },\n    //获取当前机构及其子机构\n    getCurrentOrganAndChild() {\n      this.$store.dispatch(\"getCurrentAndNextOrgan\",this.parentNode.parentNodeId).then(\n        res => {\n\n          console.log(res);\n          this.getOrganList = res.data;\n          // this.addUserForm = this.rowData;\n          //this.addUserForm.organId  = this.rowData.organId;\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //获取选中的机构下的部门\n    getDepartment(data1) {\n      console.log(data1);\n      let data = {\n        organId: data1\n      };\n      console.log(\"获取选中的机构下的部门\", data);\n      this.$store.dispatch(\"getDepartmentsNoPage\", data).then(\n        res => {\n          console.log(\"部门数据\", res);\n          this.departments = res.data;\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    // 弹框保存\n    save() {\n      this.$refs[\"addUserForm\"].validate(valid => {\n        if (valid) {\n          if (this.dialogStatus === \"addEquipment\") {\n            console.log(\"this.addUserForm\", this.addUserForm);\n            this.$store\n              .dispatch(\"addUser\", this.addUserForm)\n              .then(res => {\n                this.$message({\n                  showClose: true,\n                  message: \"新增用户成功\",\n                  type: \"success\"\n                });\n                this.visible = false;\n                this.$emit(\"uploadaaa\", \"1\");\n              })\n              .catch(err => {\n                this.$message({\n                  showClose: true,\n                  message: err,\n                  type: \"error\"\n                });\n              });\n          } else if (this.dialogStatus === \"editEquipment\") {\n            console.log(this.addUserForm);\n            let data = {\n              id: this.addUserForm.id,\n              username: this.addUserForm.username,\n              mobile: this.addUserForm.mobile,\n              nickName: this.addUserForm.nickName,\n              IDnumber: this.addUserForm.IDnumber,\n              category: this.addUserForm.category,\n              organId: this.addUserForm.organId,\n              organTitle: this.addUserForm.organTitle,\n              departmentId: this.addUserForm.departmentId,\n              departmentTitle: this.addUserForm.departmentTitle,\n              Provincial: this.addUserForm.Provincial,\n              Ministerial: this.addUserForm.Ministerial,\n              Maritime: this.addUserForm.Maritime,\n              Other: this.addUserForm.Other\n            };\n            this.$store\n              .dispatch(\"updateUser\", this.addUserForm)\n              .then(res => {\n                this.$message({\n                  showClose: true,\n                  message: \"修改用户成功\",\n                  type: \"success\"\n                });\n                this.$emit(\"uploadaaa\");\n                this.visible = false;\n              })\n              .catch(err => {\n                this.$message({\n                  showClose: true,\n                  message: err,\n                  type: \"error\"\n                });\n              });\n          }\n        }\n      });\n    },\n    // 弹框取消按钮\n    resetForm() {\n      this.visible = false;\n      this.$nextTick(() => {\n        this.$refs[\"addUserForm\"].resetFields();\n      });\n    },\n    //失去焦点请求 名称是否重复\n    // blurName() {\n    //   if(this.addUserForm.name){\n    //     this.$store.dispatch(\"hasUsername\", this.addUserForm.name).then(\n    //     res => {\n    //       console.log(res);\n    //       if(res.data.id){\n    //         this.errorOrganName = true;\n    //       }else{\n    //         this.errorOrganName = false;\n    //       }\n    //     },\n    //     err => {\n    //       console.log(err);\n    //     }\n    //   );\n      \n    //   }\n    // },\n  },\n  watch: {\n    visible(val) {\n      if (val === false) {\n        this.addUserForm = {\n          id: \"\",\n          username: \"\",\n          password: \"\",\n          mobile: \"\",\n          nickName: \"\",\n          IDnumber: \"\",\n          category: \"\",\n          organId: \"\",\n          organTitle: \"\",\n          departmentId: \"\",\n          departmentTitle: \"\",\n          Provincial: \"\",\n          Ministerial: \"\",\n          Maritime: \"\",\n          Other: \"\"\n        };\n      }\n    }\n  }\n};\n</script>\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/sys/user-manage/addUser.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":_vm.titleMap[_vm.dialogStatus],\"custom-class\":\"leftDialog\",\"visible\":_vm.visible,\"top\":\"0\",\"width\":\"40%\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"addUserForm\",staticClass:\"addOrganClass\",attrs:{\"model\":_vm.addUserForm,\"rules\":_vm.rules,\"label-width\":\"100px\",\"close-on-click-modal\":false},on:{\"close\":_vm.closeDialog}},[_c('div',{staticClass:\"part\"},[_c('p',{staticClass:\"titleP\"},[_vm._v(\"登录信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"登录用户名\",\"prop\":\"username\"}},[_c('el-input',{ref:\"username\",attrs:{\"disabled\":_vm.dialogStatus === 'editEquipment'},model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"part\"},[_c('p',{staticClass:\"titleP\"},[_vm._v(\"基本信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"真实姓名\"}},[_c('el-input',{model:{value:(_vm.addUserForm.nickName),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"nickName\", $$v)},expression:\"addUserForm.nickName\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"身份证号码\",\"prop\":\"IDnumber\"}},[_c('el-input',{ref:\"IDnumber\",model:{value:(_vm.addUserForm.IDnumber),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"IDnumber\", $$v)},expression:\"addUserForm.IDnumber\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"联系方式\",\"prop\":\"mobile\"}},[_c('el-input',{ref:\"mobile\",model:{value:(_vm.addUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"mobile\", $$v)},expression:\"addUserForm.mobile\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"执法门类\"}},[_c('el-input',{model:{value:(_vm.addUserForm.category),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"category\", $$v)},expression:\"addUserForm.category\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"执法机构\",\"prop\":\"organId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择执法机构\"},on:{\"change\":_vm.getDepartment},model:{value:(_vm.addUserForm.organId),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"organId\", $$v)},expression:\"addUserForm.organId\"}},_vm._l((_vm.getOrganList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"所属部门\",\"prop\":\"departmentId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.addUserForm.departmentId),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"departmentId\", $$v)},expression:\"addUserForm.departmentId\"}},_vm._l((_vm.departments),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"part\"},[_c('p',{staticClass:\"titleP\"},[_vm._v(\"证件信息\")]),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"省级证件号\"}},[_c('el-input',{model:{value:(_vm.addUserForm.Provincial),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"Provincial\", $$v)},expression:\"addUserForm.Provincial\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"部级证件号\"}},[_c('el-input',{model:{value:(_vm.addUserForm.Ministerial),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"Ministerial\", $$v)},expression:\"addUserForm.Ministerial\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"海事证件号\"}},[_c('el-input',{model:{value:(_vm.addUserForm.Maritime),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"Maritime\", $$v)},expression:\"addUserForm.Maritime\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('el-form-item',{attrs:{\"label\":\"其他证件号\"}},[_c('el-input',{model:{value:(_vm.addUserForm.Other),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"Other\", $$v)},expression:\"addUserForm.Other\"}})],1)],1)])]),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-55ef82b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/user-manage/addUser.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addUser.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./addUser.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-55ef82b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./addUser.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/user-manage/addUser.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}