webpackJsonp([4],{"+tG+":function(t,i){},HCkM:function(t,i){},Paox:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("Dd8w"),e=s.n(a),n=s("JSML"),r=s("dNZa"),o=s("u91Z"),c=s("NYxO"),h={data:function(){return{routekey:["findFaceRequest","findFaceHistory;findFaceHistoryDetail"],loading:!1,backTitle:"Details",resultData:"",record:"",fileObjSrc:""}},components:{requestAndHisSubMenu:n.a,circleImage:o.a,backSubMenu:r.a},computed:e()({},Object(c.b)(["apiHistoryList","imgIp"])),methods:{getPosition:function(t){var i=[];if(t.length>0)for(var s=0;s<t.length;s++){var a=t[s]?t[s]:[];i[s]=[parseInt(a[0]),parseInt(a[1]),parseInt(a[2])-parseInt(a[0]),parseInt(a[7])-parseInt(a[1])],i[s]}else i=[[0,0,0,0]];this.$refs.virtualImg,this.$refs.circleImage.initCanvas2(this.fileObjSrc,i)},getDetailData:function(){var t=this.$route.params;this.record=t.record,this.resultData=t.record.response.data,this.fileObjSrc=this.imgIp+t.record.request.image_file_1,this.resultData,this.getPosition(this.resultData.face_list)}},mounted:function(){this.$route.params.record?this.getDetailData():this.$router.go(-1)},created:function(){}},l={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"showContent detailContent"},[s("requestAndHisSubMenu",{attrs:{routekey:t.routekey}}),t._v(" "),s("backSubMenu",{attrs:{backTitle:t.backTitle,lineUnder:!1}}),t._v(" "),s("div",{staticClass:"detail"},[s("div",{staticClass:"left"},[s("circleImage",{ref:"circleImage"})],1),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"infor_form_detail"},[s("div",[s("label",[t._v("Time")]),t._v(" "),s("input",{attrs:{type:"text",readonly:""},domProps:{value:t.$util.timestampToDay(t.record.created_at)}})]),t._v(" "),s("div",{staticClass:"hasDot"},[s("label",[t._v("Situation")]),t._v(" "),s("input",{attrs:{type:"text",readonly:""},domProps:{value:t.record.status}}),t._v(" "),s("span",{class:"success"==t.record.status?"greenDot":"redDot",attrs:{id:"statusDot"}},[s("i",{staticClass:"iconfont amd-dot"})])])])])])],1)},staticRenderFns:[]};var d=s("VU/8")(h,l,!1,function(t){s("+tG+")},null,null);i.default=d.exports},u91Z:function(t,i,s){"use strict";var a={name:"circleImage",data:function(){return{img:new Image,ctx:"",canvasWidth:0,canvasHeight:0,dataUrl:"",position:[[0,0,0,0]],scaling:5}},methods:{showCircleImage:function(t,i){this.dataUrl=t,this.position=i,this.initCanvas()},initCanvas:function(){var t=this.$refs.myCanvas;if(this.dataUrl,t.getContext){this.ctx=t.getContext("2d");var i=new FileReader;i.readAsDataURL(this.dataUrl);var s=this;i.onload=function(i){s.showImage(t,i.target.result)}}},initCanvas2:function(t,i){var s=this.$refs.myCanvas;this.position=i,s.getContext&&(this.ctx=s.getContext("2d"),this.showImage(s,t))},showImage:function(t,i){this.img.src=i,this.getScaling(this.img.width,this.img.height),this.canvasWidth=Math.round(this.img.width/this.scaling),this.canvasHeight=Math.round(this.img.height/this.scaling),this.img.width,this.img.height,this.canvasWidth,this.canvasHeight,this.scaling,t.setAttribute("width",this.canvasWidth),t.setAttribute("height",this.canvasHeight),this.img.onload=this.drawImage()},getScaling:function(t,i){var s=(t/i).toFixed(2);this.scaling=s>=1?(t/350).toFixed(1):(i/350).toFixed(1)},drawImage:function(){this.ctx.drawImage(this.img,0,0,this.canvasWidth,this.canvasHeight),this.position.length,this.position;for(var t=0;t<this.position.length;t++){var i=this.position[t];if(4==i.length){var s=Math.round(i[0]/this.scaling),a=Math.round(i[1]/this.scaling),e=Math.round(i[2]/this.scaling/2);this.positioning(s,a,e)}}},positioning:function(t,i,s){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t+s,i+.8*s,1.3*s,0,2*Math.PI),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.ctx.stroke()}}},e={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"cut_image"},[i("canvas",{ref:"myCanvas",staticClass:"myCanvas"})])},staticRenderFns:[]};var n=s("VU/8")(a,e,!1,function(t){s("HCkM")},null,null);i.a=n.exports}});
//# sourceMappingURL=4.26ef675f2533f1137cc6.js.map