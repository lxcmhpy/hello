{"version":3,"sources":["webpack:///src/page/app/app.vue","webpack:///./src/page/app/app.vue?0233","webpack:///./src/page/app/app.vue"],"names":["app","data","routekey","appList","columns","title","dataIndex","align","scopedSlots","customRender","key","pagination","pageSize","loading","switchLoad","activeIndexs","appSum","inject","methods","getApplist","currentPage","_this","this","value","page","showFullLoading","$store","dispatch","then","res","length","total","totalCount","error","handleTableChange","current","gotoDetail","id","cookies","set","$router","push","name","onChangeState","record","index","_this2","valVule","app_id","_id","app_key","status","reload","addApp","created","get","app_app","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","type","on","click","_s","$t","dataSource","change","_u","fn","text","$util","uppercase","class","$event","defaultChecked","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.5aa50c233450e955db6d.js","sourcesContent":["\n<template>\n  <div class=\"showContent appContent\">\n    <div class=\"hederLink\">\n      <ul>\n        <li>\n          <span>APP</span>\n        </li>\n      </ul>\n    </div>\n    <div class=\"box\">\n      <div class=\"titleBtn\">\n        <a-button type=\"primary\" @click=\"addApp\">{{$t('app.createApp')}}</a-button>\n        <span class=\"appSum\">{{appSum}} {{$t('app.appscreated')}}</span>\n      </div>\n      <a-table\n        :columns=\"columns\"\n        :dataSource=\"appList\"\n        :pagination=\"pagination\"\n        :loading=\"loading\"\n        @change=\"handleTableChange\"\n      >\n        <template slot=\"name\" slot-scope=\"text\">{{$util.uppercase(text)}}</template>\n        <template slot=\"status\" slot-scope=\"text\">\n          <span class=\"statusSpan\">\n            <span :class=\"text=='active'?'greenDot':'redDot'\">\n              <i class=\"iconfont amd-dot\"></i>\n            </span>\n            {{text}}\n          </span>\n        </template>\n        <template slot=\"operation\" slot-scope=\"text,record,index\">\n          <span class=\"operat\">\n            <span @click=\"gotoDetail(record._id,record.key)\">\n              <i class=\"iconfont amd-appmanagement_Details\"></i>\n            </span>\n            <!-- <span v-if=\"record.status=='close'\">Apply</span>\n            <span v-else>Close</span>-->\n            <!-- <a-switch\n              :defaultChecked=\"record.status=='active'?true:false\"\n              @change=\"onSwitchChange(record,index)\"\n            /> -->\n            <a-switch   :defaultChecked=\"record.status=='active' ? true : false\"  @change='onChangeState(record,index)'/>\n          </span>\n        </template>\n      </a-table>\n    </div>\n  </div>\n</template>\n<script>\n\nimport Cookies from \"@/js/cookies\";\nexport default {\n  data() {\n    const columns = [\n      {\n        title: \"APP\",\n        dataIndex: \"name\",\n        align: \"center\",\n        scopedSlots: { customRender: \"name\" }\n      },\n      {\n        title: \"Status\",\n        dataIndex: \"status\",\n        align: \"center\",\n        scopedSlots: { customRender: \"status\" }\n      },\n      {\n        title: \"Operating\",\n        key: \"action\",\n        align: \"center\",\n        scopedSlots: { customRender: \"operation\" }\n      }\n    ];\n\n    return {\n      routekey: [\"app\"],\n      appList: [],\n      columns,\n      pagination: { pageSize: 10 },\n      loading: false,\n      switchLoad:[],\n      activeIndexs:[],\n      appSum:'',\n    };\n  },\n  inject: [\"reload\"],\n  methods: {\n    // 获取applist\n    getApplist(currentPage) {\n      let value = {\n        page: currentPage,\n        showFullLoading: currentPage == 1 ? true : false //只要加载第一页的时候全局loading\n      };\n      this.loading = true;\n      this.$store.dispatch(\"getApplist\", value).then(\n        res => {\n          console.log(res);\n          this.appList = res.data.data;\n          this.appSum=this.appList.length;\n          this.pagination.total = res.data.totalCount;\n          this.loading = false;\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    },\n    handleTableChange(pagination) {\n      this.getApplist(pagination.current);\n    },\n    // 跳转详情页\n    gotoDetail(id, key) {\n      console.log(id);\n      Cookies.set(\"appId\", id);\n      Cookies.set(\"appKey\", key);\n      this.$store.dispatch(\"resetWhiteList\")  //将state中的whiteList置空，防止在修改时取出其他app的whiteList\n      this.$router.push({ name: \"appDetail\" });\n    },\n    onChangeState(record,index) {\n      // console.log(index);\n      // this.switchLoad=[];   //必须置空 否则没有效果\n      // this.switchLoad=this.activeIndexs;  //得到之前的状态 点击之前可能还有其他按钮的loading\n      // this.switchLoad[index]=true;     //给点击的按钮loading\n      // this.activeIndexs=this.switchLoad;   //保存各个loading状态\n      // console.log(this.switchLoad);\n      // console.log(record,index); // true false\n      // console.log(record.status);\n      let valVule={\n        app_id:record._id,\n        app_key:record.key,\n        status:record.status=='active' ?  \"close\":\"active\"\n      }\n      console.log(valVule);\n      this.$store.dispatch(\"changAppStatus\", valVule).then(\n        res => {\n          console.log(res);\n          this.reload();\n          // this.switchLoad=[];\n          // this.switchLoad=this.activeIndexs;\n          // this.switchLoad[index]=false;\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    },\n    addApp() {\n      this.$store.dispatch(\"resetWhiteList\")  //将state中的whiteList置空，防止在修改时取出其他app的whiteList\n      this.$router.push({ name: \"addApp\" });\n    }\n  },\n  created() {\n    // this.reload();\n    this.getApplist(1);\n    console.log(Cookies.get(\"menu\"));\n\n  }\n};\n</script>\n<style lang=\"less\">\n@import \"../../css/app.less\";\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/app/app.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"showContent appContent\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"titleBtn\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addApp}},[_vm._v(_vm._s(_vm.$t('app.createApp')))]),_vm._v(\" \"),_c('span',{staticClass:\"appSum\"},[_vm._v(_vm._s(_vm.appSum)+\" \"+_vm._s(_vm.$t('app.appscreated')))])],1),_vm._v(\" \"),_c('a-table',{attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.appList,\"pagination\":_vm.pagination,\"loading\":_vm.loading},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"name\",fn:function(text){return [_vm._v(_vm._s(_vm.$util.uppercase(text)))]}},{key:\"status\",fn:function(text){return [_c('span',{staticClass:\"statusSpan\"},[_c('span',{class:text=='active'?'greenDot':'redDot'},[_c('i',{staticClass:\"iconfont amd-dot\"})]),_vm._v(\"\\n          \"+_vm._s(text)+\"\\n        \")])]}},{key:\"operation\",fn:function(text,record,index){return [_c('span',{staticClass:\"operat\"},[_c('span',{on:{\"click\":function($event){return _vm.gotoDetail(record._id,record.key)}}},[_c('i',{staticClass:\"iconfont amd-appmanagement_Details\"})]),_vm._v(\" \"),_c('a-switch',{attrs:{\"defaultChecked\":record.status=='active' ? true : false},on:{\"change\":function($event){return _vm.onChangeState(record,index)}}})],1)]}}])})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hederLink\"},[_c('ul',[_c('li',[_c('span',[_vm._v(\"APP\")])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-61a25254\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/app/app.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-61a25254\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61a25254\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./app.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/app/app.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}