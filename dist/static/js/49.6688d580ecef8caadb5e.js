webpackJsonp([49,71],{"5BWG":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={data:function(){return{visible:!1,addOrganForm:{name:"",pidName:"",code:"",organType:"",accessToAuthority:"",organNature:"",isIndependentEnforce:"",address:"",zipCode:"",telephone:"",contactor:"",fundingSource:"",legalBasis:"",mainPowers:""},rules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},parentNode:"",dialogTitle:"",organId:"",errorOrganName:!1,handelType:0,isDisabled:!1}},methods:{showModal:function(e,a){this.visible=!0,this.handelType=e,0==e?(this.dialogTitle="新增机构",this.parentNode=a,this.addOrganForm.pidName=a.parentNodeName,this.isDisabled=!1):1==e?(this.dialogTitle="机构详情",this.organId=a,this.getOrganDetail(a),this.isDisabled=!0):2==e&&(this.dialogTitle="修改机构",this.organId=a.id,this.parentNode=a.parentNode,this.getOrganDetail(a.id),this.isDisabled=!1)},closeDialog:function(){this.visible=!1,this.$refs.addOrganForm.resetFields(),this.errorOrganName=!1},focusOrganName:function(){this.errorOrganName=!1},blurOrganName:function(){var e=this;this.addOrganForm.name&&this.$store.dispatch("hasOrganName",this.addOrganForm.name).then(function(a){a.data.id?e.errorOrganName=!0:e.errorOrganName=!1},function(e){})},addOrgan:function(e){var a=this;this.$refs[e].validate(function(e){e&&!a.errorOrganName&&(a.addOrganForm.pid=a.parentNode.parentNodeId,a.addOrganForm.id=0==a.handelType?"":a.organId,a.addOrganForm,a.$store.dispatch("addOrgan",a.addOrganForm).then(function(e){a.addOrganForm.pid,a.$emit("getAllOrgan2",a.addOrganForm.pid),a.$message({type:"success",message:0==a.handelType?"添加成功!":"修改成功"}),a.visible=!1},function(e){}))})},getOrganDetail:function(e){var a=this,t={id:e};this.$store.dispatch("getOrganDetail",t).then(function(e){a.addOrganForm=e.data},function(e){})}}},n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-dialog",{attrs:{title:e.dialogTitle,"custom-class":"leftDialog",visible:e.visible,top:"0",width:"45%","close-on-click-modal":!1},on:{"update:visible":function(a){e.visible=a},close:e.closeDialog}},[t("el-form",{ref:"addOrganForm",staticClass:"addOrganClass",attrs:{model:e.addOrganForm,rules:e.rules,"label-width":"100px",disabled:e.isDisabled}},[t("div",{staticClass:"part"},[t("p",{staticClass:"titleP"},[e._v("基本信息")]),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[t("el-input",{on:{focus:e.focusOrganName,blur:e.blurOrganName},model:{value:e.addOrganForm.name,callback:function(a){e.$set(e.addOrganForm,"name",a)},expression:"addOrganForm.name"}})],1),e._v(" "),e.errorOrganName?t("span",{staticClass:"errorInput"},[e._v("该机构名称已存在")]):e._e()],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"上级机构",prop:"pidName"}},[t("el-input",{model:{value:e.addOrganForm.pidName,callback:function(a){e.$set(e.addOrganForm,"pidName",a)},expression:"addOrganForm.pidName"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构编码",prop:"code"}},[t("el-input",{model:{value:e.addOrganForm.code,callback:function(a){e.$set(e.addOrganForm,"code",a)},expression:"addOrganForm.code"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构类型",prop:"organType"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.addOrganForm.organType,callback:function(a){e.$set(e.addOrganForm,"organType",a)},expression:"addOrganForm.organType"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"职权取得方式",prop:"accessToAuthority"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.addOrganForm.accessToAuthority,callback:function(a){e.$set(e.addOrganForm,"accessToAuthority",a)},expression:"addOrganForm.accessToAuthority"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构性质",prop:"organNature"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.addOrganForm.organNature,callback:function(a){e.$set(e.addOrganForm,"organNature",a)},expression:"addOrganForm.organNature"}})],1)],1),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"是否具有独立执法资格","label-width":"160px",prop:"isIndependentEnforce"}},[t("el-radio-group",{model:{value:e.addOrganForm.isIndependentEnforce,callback:function(a){e.$set(e.addOrganForm,"isIndependentEnforce",a)},expression:"addOrganForm.isIndependentEnforce"}},[t("el-radio",{attrs:{label:"是"}}),e._v(" "),t("el-radio",{attrs:{label:"否"}})],1)],1)],1)]),e._v(" "),t("div",{staticClass:"part"},[t("p",{staticClass:"titleP"},[e._v("机构详情")]),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构地址",prop:"address"}},[t("el-input",{model:{value:e.addOrganForm.address,callback:function(a){e.$set(e.addOrganForm,"address",a)},expression:"addOrganForm.address"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"机构邮编",prop:"zipCode"}},[t("el-input",{model:{value:e.addOrganForm.zipCode,callback:function(a){e.$set(e.addOrganForm,"zipCode",a)},expression:"addOrganForm.zipCode"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[t("el-input",{model:{value:e.addOrganForm.telephone,callback:function(a){e.$set(e.addOrganForm,"telephone",a)},expression:"addOrganForm.telephone"}})],1)],1),e._v(" "),t("div",{staticClass:"item"},[t("el-form-item",{attrs:{label:"联系人",prop:"contactor"}},[t("el-input",{model:{value:e.addOrganForm.contactor,callback:function(a){e.$set(e.addOrganForm,"contactor",a)},expression:"addOrganForm.contactor"}})],1)],1)]),e._v(" "),t("div",{staticClass:"part"},[t("p",{staticClass:"titleP"},[e._v("三定要求")]),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"资金来源",prop:"fundingSource"}},[t("el-input",{model:{value:e.addOrganForm.fundingSource,callback:function(a){e.$set(e.addOrganForm,"fundingSource",a)},expression:"addOrganForm.fundingSource"}})],1)],1),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"法律依据",prop:"legalBasis"}},[t("el-input",{model:{value:e.addOrganForm.legalBasis,callback:function(a){e.$set(e.addOrganForm,"legalBasis",a)},expression:"addOrganForm.legalBasis"}})],1)],1),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"主要职权",prop:"mainPowers"}},[t("el-input",{model:{value:e.addOrganForm.mainPowers,callback:function(a){e.$set(e.addOrganForm,"mainPowers",a)},expression:"addOrganForm.mainPowers"}})],1)],1)])]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.visible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.addOrgan("addOrganForm")}}},[e._v("确 定")])],1)],1)},staticRenderFns:[]},i=t("VU/8")(r,n,!1,null,null,null);a.default=i.exports},"842T":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r,n=t("bOdI"),i=t.n(n),o={watch:{filterText:function(e){this.$refs.tree.filter(e)}},data:function(){return{filterText:"",selectCurrentTreeName:"",organData:[],defaultProps:{children:"children",label:"label"},tableData:[],departLevel:0,defaultExpandedKeys:[],currentPage:1,pageSize:10,totalPage:0,currentOrganId:"",showAddDialog:!1}},components:{addOrgan:t("5BWG").default},inject:["reload"],methods:(r={filterNode:function(e,a){return!e||-1!==a.label.indexOf(e)},editSelectNode:function(){},handleNodeClick:function(e){this.selectCurrentTreeName=e.label,this.tableData=[],this.currentOrganId=e.id,this.getSelectOrgan(this.currentOrganId)},nodeExpand:function(e,a,t){},getAllOrgan:function(e){var a=this;this.$store.dispatch("getAllOrgan").then(function(t){a.defaultExpandedKeys.push(t.data[0].id),a.selectCurrentTreeName=a.selectCurrentTreeName?a.selectCurrentTreeName:t.data[0].label,t.data[0].children&&t.data[0].children.length>0&&t.data[0].children.forEach(function(e){a.defaultExpandedKeys.push(e.id)}),a.organData=t.data,a.defaultExpandedKeys,a.organData,a.currentOrganId="root"==e?t.data[0].id:e,a.getSelectOrgan()},function(e){})},getSelectOrgan:function(){var e=this,a={id:this.currentOrganId,current:this.currentPage,size:this.pageSize};this.$store.dispatch("getSelectOrgan",a).then(function(a){e.tableData=a.data.records,e.totalPage=a.data.total},function(e){})},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getSelectOrgan()},handleCurrentChange:function(e){this.currentPage=e,this.getSelectOrgan()},addOrgan:function(){var e={parentNodeId:this.currentOrganId,parentNodeName:this.selectCurrentTreeName};this.$refs.addOrganRef.showModal(0,e)},showOrganDetail:function(e,a,t){this.$refs.addOrganRef.showModal(1,e.id)},editOrgan:function(e){var a={id:e,parentNode:{parentNodeId:this.currentOrganId,parentNodeName:this.selectCurrentTreeName}};this.$refs.addOrganRef.showModal(2,a)}},i()(r,"editSelectNode",function(){var e={id:id,parentNode:{parentNodeId:this.currentOrganId,parentNodeName:this.selectCurrentTreeName}};this.$refs.addOrganRef.showModal(2,e)}),i()(r,"deleteOrgan",function(e){var a=this;this.$confirm("确认删除该机构?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$store.dispatch("deleteOrgan",e).then(function(e){a.getAllOrgan(a.currentOrganId),a.$message({type:"success",message:"删除成功!"})},function(e){})}).catch(function(){})}),r),mounted:function(){},created:function(){this.getAllOrgan("root")}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"com_searchAndpageBoxPadding"},[t("div",{staticClass:"fullBox departBox"},[t("div",{staticClass:"departOrUserTree"},[t("p",[e._v("机构列表")]),e._v(" "),t("div",{staticClass:"searchDepartBox"},[t("el-input",{attrs:{placeholder:"输入机构名"},model:{value:e.filterText,callback:function(a){e.filterText=a},expression:"filterText"}},[t("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-search"},slot:"append"})],1)],1),e._v(" "),t("div",{staticClass:"treeBox"},[t("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.organData,props:e.defaultProps,"node-key":"id","filter-node-method":e.filterNode,"default-expanded-keys":e.defaultExpandedKeys},on:{"node-expand":e.nodeExpand,"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(a){var r=a.node,n=a.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[t("i",{class:n.children&&n.children.length>0?"iconfont law-icon_shou_bag":""}),e._v(" "),t("span",{class:n.children?"":"hasMarginLeft"},[e._v(e._s(r.label))])])])}}])})],1)]),e._v(" "),t("div",{staticClass:"departTable"},[t("p",[e._v("\n        "+e._s(e.selectCurrentTreeName)+"\n        "),t("span",{staticClass:"editSelectNode",on:{click:e.editSelectNode}},[t("i",{staticClass:"iconfont law-btn_bianji"})])]),e._v(" "),t("div",{staticClass:"handelBtn"},[t("div",[e._v("子机构列表")]),e._v(" "),t("div",[t("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"medium"},on:{click:e.addOrgan}},[t("i",{staticClass:"iconfont law-icon_weihu"}),e._v("新增机构\n            "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("批量添加")]),e._v(" "),t("el-dropdown-item",[e._v("批量导入")])],1)],1)],1)]),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"70%"},on:{"row-click":e.showOrganDetail}},[t("el-table-column",{attrs:{prop:"code",label:"机构编码",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"name",label:"机构名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"type",label:"机构类型",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:[function(e){e.stopPropagation()},function(t){return e.editOrgan(a.row.id)}]}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:[function(e){e.stopPropagation()},function(t){return e.deleteOrgan(a.row.id)}]}},[e._v("删除")])]}}])})],1),e._v(" "),t("div",{staticClass:"paginationBox"},[t("el-pagination",{attrs:{"current-page":e.currentPage,background:"","page-sizes":[10,20,30,40],layout:"prev, pager, next,sizes,jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),t("addOrgan",{ref:"addOrganRef",on:{getAllOrgan2:e.getAllOrgan}})],1)])},staticRenderFns:[]};var l=t("VU/8")(o,d,!1,function(e){t("h3aL")},null,null);a.default=l.exports},h3aL:function(e,a){}});
//# sourceMappingURL=49.6688d580ecef8caadb5e.js.map