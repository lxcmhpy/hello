webpackJsonp([5],{DhaN:function(t,e){},b4WU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("0Emr"),s=a("zNBw"),r=a("dNZa"),o={data:function(){return{iconFile:"",appData:this.$route.params.app,appId:i.a.get("appId"),app_key:i.a.get("appKey"),backTitle:this.$t("app.editApp"),showWhiteListError:!1,iconName:""}},computed:{labelCol:function(){return"zh-CN"==i.a.get("play_lang")?{span:4}:{span:6}},wrapperCol:function(){return"zh-CN"==i.a.get("play_lang")?{span:20}:{span:18}},wrapperCol2:function(){return"zh-CN"==i.a.get("play_lang")?{span:20,offset:4}:{span:18,offset:6}},whiteList:{get:function(){return this.$store.state.whiteList},set:function(){}}},inject:["reload"],components:{addWhiteList:s.a,backSubMenu:r.a},methods:{back:function(){this.$router.push({name:"applist"})},tirggerFile:function(t){this.iconFile=t.target.files,this.iconName=this.iconFile[0].name,this.iconFile},submitInfor:function(t){var e=this;t.preventDefault();var a="";this.form.validateFields(function(t,i){if(e.whiteList.length>=1?a=e.whiteList.join(";"):e.showWhiteListError=!0,i.tag&&(i.tag=i.tag.join(";")),!t&&!e.showWhiteListError){e.whiteList;var s={avatar:e.iconFile[0],callback:i.callback,message_check_token:i.message_check_token,message_encryption:i.message_encryption,white_list:a,tag:i.tag,description:i.description,website:i.website,app_id:e.appId,app_key:e.app_key};e.$store.dispatch("editApp",s).then(function(t){e.$message.success("修改成功"),e.$router.go(-1)},function(t){})}})},handleChange:function(t){},addTag:function(){this.showWhiteListError=!1,this.$refs.addWhiteListRef.showModal()},closeWhiteListTag:function(t){this.$store.dispatch("reduceWhiteList",t)},formVal:function(){this.appData,this.$nextTick(function(){var t=this;this.form.setFieldsValue({avatar:"",name:this.appData.name,callback:this.appData.callback,message_check_token:this.appData.message_check_token,message_encryption:this.appData.message_encryption,white_list:this.appData.white_list,tag:this.appData.tag,description:this.appData.description,website:this.appData.website}),this.appData.white_list.forEach(function(e){t.$store.dispatch("addWhiteList",e)})})},createKey:function(){var t=this.$util.getRandomString(32);this.form.setFieldsValue({message_encryption:t})}},created:function(){this.appData?this.formVal():this.$router.go(-1)}},l={render:function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"showContent appContent"},[i("backSubMenu",{attrs:{backTitle:e.backTitle,lineUnder:!0}}),e._v(" "),i("div",{staticClass:"box"},[i("p",{staticClass:"titleLine"},[e._v(e._s(e.$t("app.basicInformation")))]),e._v(" "),i("div",{staticClass:"appForm"},[i("a-form",{attrs:{autoFormCreate:function(e){t.form=e}},on:{submit:e.submitInfor}},[i("a-form-item",{attrs:{label:e.$t("app.icon"),fieldDecoratorId:"avatar",fieldDecoratorOptions:{},labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[i("a",{staticClass:"a-upload",attrs:{href:"javascript:;"}},[i("a-input",{attrs:{type:"file",id:"appIconfile"},on:{change:function(t){return e.tirggerFile(t)}}}),e._v("Upload a photo\n        ")],1),i("span",{staticClass:"a-uploadName"},[e._v(e._s(e.iconName))])]),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.appName"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,whitespace:!0,message:"please enter"}]}}},[i("a-input",{attrs:{disabled:""}})],1),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.apptag"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"tag",fieldDecoratorOptions:{}}},[i("a-select",{attrs:{mode:"tags",placeholder:"Please enter"},on:{change:e.handleChange}})],1),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.appIntroduction"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"description",fieldDecoratorOptions:{}}},[i("a-textarea",{attrs:{autosize:""}})],1),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.officialWebsite"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"website",fieldDecoratorOptions:{}}},[i("a-input")],1),e._v(" "),i("p",{staticClass:"titleLine",attrs:{id:"editTitle2"}},[e._v(e._s(e.$t("app.applicationConfiguration")))]),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.messageVerificationToken"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"message_check_token",fieldDecoratorOptions:{rules:[{required:!0,whitespace:!0,message:"please enter"}]}}},[i("a-input")],1),e._v(" "),i("a-form-item",{staticClass:"formItemKey",attrs:{label:e.$t("app.messageEncryptionKey"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"message_encryption",fieldDecoratorOptions:{validateFirst:!0,rules:[{required:!0,whitespace:!0,message:"please enter"},{pattern:/^[0-9a-zA-Z]{32}$/,message:"32位的字母数字组合"}]}}},[i("a-input"),i("span",{staticClass:"createKey",on:{click:e.createKey}},[e._v("随机生成")])],1),e._v(" "),i("a-form-item",{attrs:{label:e.$t("app.callbackURL"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"callback",fieldDecoratorOptions:{validateFirst:!0,rules:[{required:!0,whitespace:!0,message:"please enter"},{type:"url",message:"form error"}]}}},[i("a-input")],1),e._v(" "),i("a-form-item",{staticClass:"whiteFormItem",attrs:{label:e.$t("app.whiteList"),labelCol:e.labelCol,wrapperCol:e.wrapperCol,fieldDecoratorId:"white_list",fieldDecoratorOptions:{}}},[i("div",{staticClass:"whiteListStyle"},[e._l(e.whiteList,function(t,a){return i("a-tag",{key:t,attrs:{closable:""},on:{close:function(a){return e.closeWhiteListTag(t)}}},[e._v(e._s(t))])}),e._v(" "),i("span",{on:{click:e.addTag}},[i("i",{staticClass:"iconfont amd-add"})]),e._v(" "),e.showWhiteListError?i("p",[e._v("please add")]):e._e()],2)]),e._v(" "),i("a-form-item",{staticClass:"formCenter"},[i("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("Submit")])],1)],1)],1)]),e._v(" "),i("addWhiteList",{ref:"addWhiteListRef"})],1)},staticRenderFns:[]};var n=a("VU/8")(o,l,!1,function(t){a("DhaN")},null,null);e.default=n.exports},nM2Y:function(t,e){},zNBw:function(t,e,a){"use strict";var i=a("Dd8w"),s=a.n(i),r=(a("0Emr"),a("NYxO")),o={data:function(){return{visible:!1,ip1:"",ip2:"",ip3:"",ip4:"",errorShow:!1}},computed:s()({},Object(r.b)(["whiteList"])),methods:{showModal:function(){this.errorShow=!1,this.ip1="",this.ip2="",this.ip3="",this.ip4="",this.visible=!0},hideModal:function(){this.visible=!1},getIp:function(){var t=this.ip1+"."+this.ip2+"."+this.ip3+"."+this.ip4;/^([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.([0-9]|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])$/.test(t)?(this.whiteList,this.whiteList.indexOf(t),this.whiteList.indexOf(t)>-1?this.$message.error("该IP地址已存在"):(this.$store.dispatch("addWhiteList",t),this.hideModal())):this.errorShow=!0}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"noformModel",attrs:{title:"Add whitelist",footer:null,closable:!1,destroyOnClose:!0},on:{ok:t.hideModal},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticClass:"ipAdressCon"},[a("div",{staticClass:"ipAdress"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ip1,expression:"ip1"}],attrs:{type:"text"},domProps:{value:t.ip1},on:{input:function(e){e.target.composing||(t.ip1=e.target.value)}}}),t._v(" "),a("span",[t._v(".")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ip2,expression:"ip2"}],attrs:{type:"text"},domProps:{value:t.ip2},on:{input:function(e){e.target.composing||(t.ip2=e.target.value)}}}),t._v(" "),a("span",[t._v(".")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ip3,expression:"ip3"}],attrs:{type:"text"},domProps:{value:t.ip3},on:{input:function(e){e.target.composing||(t.ip3=e.target.value)}}}),t._v(" "),a("span",[t._v(".")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ip4,expression:"ip4"}],attrs:{type:"text"},domProps:{value:t.ip4},on:{input:function(e){e.target.composing||(t.ip4=e.target.value)}}}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.errorShow,expression:"errorShow"}]},[t._v("请输入正确的ip")])]),t._v(" "),a("p",{staticClass:"modelBtn"},[a("a-button",{attrs:{type:"primary"},on:{click:t.getIp}},[t._v("Add")])],1)])])],1)},staticRenderFns:[]};var n=a("VU/8")(o,l,!1,function(t){a("nM2Y")},null,null);e.a=n.exports}});
//# sourceMappingURL=5.97833400a3a1d67b4b9c.js.map