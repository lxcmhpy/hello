{"version":3,"sources":["webpack:///src/page/faceRecognize/faceComparison/faceComparisonHistory.vue","webpack:///./src/page/faceRecognize/faceComparison/faceComparisonHistory.vue?73c2","webpack:///./src/page/faceRecognize/faceComparison/faceComparisonHistory.vue"],"names":["faceComparisonHistory","data","routekey","loading","historyKey","dataSource","columns","title","dataIndex","align","scopedSlots","customRender","width","serviceApiId","pagination","pageSize","components","requestAndHisSubMenu","mixins","computed","extends_default","Object","vuex_esm","methods","getImage","url","getTime","time","this","$util","timestampToDay","selectHistory","record","$store","dispatch","current","$router","push","name","params","handleTableChange","getRequestlist","ifGetData","getApiListSuccess","historyItem","apiHistoryList","_id","listPage","Number","currentPage","_this","page","showFullLoading","then","res","total","totalCount","error","created","getApiList","watch","oldval","val","faceComparison_faceComparisonHistory","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","on","change","_u","key","fn","created_at","_s","response","score","request","status","src","image_file_1","image_file_2","text","class","index","click","$event","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/37.452e365a96cb89d94852.js","sourcesContent":["<template>\n  <div class=\"showContent\">\n    <requestAndHisSubMenu :routekey=\"routekey\"></requestAndHisSubMenu>\n    <a-table\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"pagination\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\"\n      class=\"newTable\"\n    >\n      <template slot=\"created_at\" slot-scope=\"created_at\">{{getTime(created_at)}}</template>\n      <template slot=\"response\" slot-scope=\"response\">\n        <span>{{response.data.score?response.data.score:'--'}}</span>\n      </template>\n      <template slot=\"request\" slot-scope=\"request,record\">\n        <div v-if=\"record.status=='success'\">\n          <div class=\"twoImgCell\">\n          <img :src=\"getImage(request.image_file_1)\">\n          <img :src=\"getImage(request.image_file_2)\">\n\n          </div>\n        </div>\n        <div v-else>--</div>\n      </template>\n       <template slot=\"status\" slot-scope=\"text\">\n          <span class=\"statusSpan\">\n            <span :class=\"text=='success'?'greenDot':'redDot'\">\n              <i class=\"iconfont amd-dot\"></i>\n            </span>\n            {{text}}\n          </span>\n        </template>\n      <template slot=\"operation\" slot-scope=\"text,record,index\">\n        <span v-if=\"record.status=='success'\" @click=\"selectHistory(record)\" class=\"historyDetail\"><i class=\"iconfont amd-arrows_right\"></i></span>                        \n      </template>\n    </a-table>\n  </div>\n</template>\n<script>\nimport requestAndHisSubMenu from \"@/components/requestAndHisSubMenu\";\nimport { mapGetters } from \"vuex\";\nimport { mixinGetApiList } from \"@/js/mixins\";\n\nexport default {\n  data() {\n    const columns = [\n      {\n        title: \"Face Comparison\",\n        dataIndex: \"request\",\n        align: \"center\",\n        scopedSlots: { customRender: \"request\" }\n      },\n      {\n        title: \"Similarity\",\n        dataIndex: \"response\",\n        align: \"center\",\n        scopedSlots: { customRender: \"response\" }\n      },\n      {\n        title: \"Upload Time\",\n        dataIndex: \"created_at\",\n        align: \"center\",\n        scopedSlots: { customRender: \"created_at\" }\n      },\n      {\n        title: \"Status\",\n        dataIndex: \"status\",\n        align: \"center\",\n        scopedSlots: { customRender: \"status\" }\n      },\n      {\n        title: \"\",\n        dataIndex: \"operation\",\n         align: \"center\",\n        width:'50px',\n        scopedSlots: { customRender: \"operation\" }\n      }\n    ];\n\n    return {\n      routekey: [\"faceComparisonRequest\", \"faceComparisonHistory;faceComparisonHistoryDetail\"],\n      loading: false,\n      historyKey: \"app/v1/face/recognition/face-noun\",\n      dataSource: [],\n      columns: columns,\n      serviceApiId: \"\",\n      pagination: { pageSize: 10 },\n    };\n  },\n  components: {\n    requestAndHisSubMenu\n  },\n  mixins:[mixinGetApiList],\n  computed: {\n    ...mapGetters([\"apiHistoryList\",'listPage'])\n  },\n  methods: {\n    getImage(url) {\n      let imageFront = \"http://kotadata.oss-ap-southeast-5.aliyuncs.com\";\n      return imageFront + url;\n    },\n    getTime(time) {\n      return this.$util.timestampToDay(time);\n    },\n    selectHistory(record) {\n      this.$store.dispatch(\"changePage\", this.pagination.current);\n      this.$router.push({ name: \"faceComparisonHistoryDetail\", params: {record} });\n    },\n    handleTableChange(pagination) {\n      this.pagination.current = pagination.current;\n      this.getRequestlist(pagination.current);\n    },\n    //判断是否获取到apiList\n    ifGetData(){\n      if(this.getApiListSuccess){\n        console.log('获取到apilist了');\n        let historyItem = this.apiHistoryList[this.historyKey];\n        this.serviceApiId = historyItem._id;\n        if(this.listPage){\n            this.pagination.current=Number(this.listPage);\n            this.getRequestlist(this.listPage);            \n        }else{\n            this.getRequestlist(1);\n        }\n      }else{\n      }\n    },\n    getRequestlist(currentPage) {\n      let params = {\n        serviceApiId: this.serviceApiId,\n        page: currentPage,\n        pageSize: this.pageSize,\n        showFullLoading: currentPage == 1 ? true : false //只要加载第一页的时候全局loading\n      };\n      this.loading = true;\n      this.$store.dispatch(\"getLog\", params).then(\n        res => {\n          console.log(res);\n           this.dataSource = res.data.data;\n          const pagination = { ...this.pagination };\n          pagination.total = res.data.totalCount;\n          this.loading = false;\n          this.pagination = pagination;\n        },\n        error => {\n          console.log(error);\n        }\n      );\n    },\n    \n  },\n  created() {\n    this.getApiList();  //必须  调用mixis中的方法\n  },\n  watch:{\n    getApiListSuccess(oldval,val){\n      console.log(oldval,val);\n      this.ifGetData();\n    }\n  }\n};\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/page/faceRecognize/faceComparison/faceComparisonHistory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"showContent\"},[_c('requestAndHisSubMenu',{attrs:{\"routekey\":_vm.routekey}}),_vm._v(\" \"),_c('a-table',{staticClass:\"newTable\",attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"pagination\":_vm.pagination,\"loading\":_vm.loading},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"created_at\",fn:function(created_at){return [_vm._v(_vm._s(_vm.getTime(created_at)))]}},{key:\"response\",fn:function(response){return [_c('span',[_vm._v(_vm._s(response.data.score?response.data.score:'--'))])]}},{key:\"request\",fn:function(request,record){return [(record.status=='success')?_c('div',[_c('div',{staticClass:\"twoImgCell\"},[_c('img',{attrs:{\"src\":_vm.getImage(request.image_file_1)}}),_vm._v(\" \"),_c('img',{attrs:{\"src\":_vm.getImage(request.image_file_2)}})])]):_c('div',[_vm._v(\"--\")])]}},{key:\"status\",fn:function(text){return [_c('span',{staticClass:\"statusSpan\"},[_c('span',{class:text=='success'?'greenDot':'redDot'},[_c('i',{staticClass:\"iconfont amd-dot\"})]),_vm._v(\"\\n          \"+_vm._s(text)+\"\\n        \")])]}},{key:\"operation\",fn:function(text,record,index){return [(record.status=='success')?_c('span',{staticClass:\"historyDetail\",on:{\"click\":function($event){return _vm.selectHistory(record)}}},[_c('i',{staticClass:\"iconfont amd-arrows_right\"})]):_vm._e()]}}])})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58c32bf6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/faceRecognize/faceComparison/faceComparisonHistory.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./faceComparisonHistory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./faceComparisonHistory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58c32bf6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./faceComparisonHistory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/faceRecognize/faceComparison/faceComparisonHistory.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}