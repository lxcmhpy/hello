{"version":3,"sources":["webpack:///src/page/sys/role-manage/bindOrgan.vue","webpack:///./src/page/sys/role-manage/bindOrgan.vue?0b8a","webpack:///./src/page/sys/role-manage/bindOrgan.vue"],"names":["bindOrgan","data","visible","organData","defaultProps","children","label","roleId","methods","showModal","this","closeDialog","getOrgan","_this","$store","dispatch","then","res","getRoleBindOrgan","err","_this2","organIds","forEach","item","push","organId","$refs","organTree","setCheckedKeys","bindOrganSure","_this3","getCheckedKeys","$message","type","message","openDialog","created","role_manage_bindOrgan","render","_vm","_h","$createElement","_c","_self","attrs","title","close-on-click-modal","width","top","on","update:visible","$event","close","open","ref","show-checkbox","default-expand-all","node-key","highlight-current","props","_v","staticClass","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"sGA4BA,IAAAA,GACAC,KADA,WAEA,OACAC,SAAA,EACAC,aACAC,cACAC,SAAA,WACAC,MAAA,SAEAC,OAAA,KAGAC,SACAC,UADA,SACAF,GACAG,KAAAR,SAAA,EACAQ,KAAAH,UAGAI,YANA,WAOAD,KAAAR,SAAA,GAIAU,SAXA,WAWA,IAAAC,EAAAH,KACAA,KAAAI,OAAAC,SAAA,eAAAC,KACA,SAAAC,GACAJ,EAAAV,UAAAc,EAAAhB,KACAY,EAAAK,oBAEA,SAAAC,OAMAD,iBAvBA,WAuBA,IAAAE,EAAAV,KACAA,KAAAI,OAAAC,SAAA,mBAAAL,KAAAH,QAAAS,KACA,SAAAC,GAEA,IAAAI,KACAJ,EAAAhB,KAAAqB,QAAA,SAAAC,GACAF,EAAAG,KAAAD,EAAAE,WAEAL,EAAAM,MAAAC,UAAAC,eAAAP,IAEA,SAAAF,OAMAU,cAvCA,WAuCA,IAAAC,EAAApB,KACAA,KAAAgB,MAAAC,UAAAI,iBACA,IAAA9B,GACAM,OAAAG,KAAAH,OACAc,SAAAX,KAAAgB,MAAAC,UAAAI,kBAEArB,KAAAI,OAAAC,SAAA,gBAAAd,GAAAe,KACA,SAAAC,GAEAa,EAAA5B,SAAA,EACA4B,EAAAE,UACAC,KAAA,UACAC,QAAA,UAGA,SAAAf,OAKAgB,WA3DA,WA4DAzB,KAAAE,aAGAwB,QA3EA,cCzBeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA7B,KAAa8B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,aAAuBE,OAAOC,MAAA,OAAA3C,QAAAqC,EAAArC,QAAA4C,wBAAA,EAAAC,MAAA,MAAAC,IAAA,QAA6FC,IAAKC,iBAAA,SAAAC,GAAkCZ,EAAArC,QAAAiD,GAAmBC,MAAAb,EAAA5B,YAAA0C,KAAAd,EAAAJ,cAAgDO,EAAA,OAAAA,EAAA,WAA0BY,IAAA,YAAAV,OAAuB3C,KAAAsC,EAAApC,UAAAoD,gBAAA,GAAAC,qBAAA,GAAAC,WAAA,KAAAC,oBAAA,GAAAC,MAAApB,EAAAnC,iBAAiI,GAAAmC,EAAAqB,GAAA,KAAAlB,EAAA,QAA6BmB,YAAA,gBAAAjB,OAAmCkB,KAAA,UAAgBA,KAAA,WAAepB,EAAA,aAAkBO,IAAIc,MAAA,SAAAZ,GAAyBZ,EAAArC,SAAA,MAAsBqC,EAAAqB,GAAA,SAAArB,EAAAqB,GAAA,KAAAlB,EAAA,aAA8CE,OAAOX,KAAA,WAAiBgB,IAAKc,MAAA,SAAAZ,GAAyB,OAAAZ,EAAAV,oBAA6BU,EAAAqB,GAAA,gBAEpwBI,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACEnE,EACAqC,GATF,EAEA,KAEA,KAEA,MAUe+B,EAAA,QAAAH,EAAiB","file":"static/js/68.323b2c2a6989fa9ab05e.js","sourcesContent":["<template>\n  <el-dialog\n    title=\"绑定机构\"\n    :visible.sync=\"visible\"\n    @close=\"closeDialog\"\n    @open=\"openDialog\"\n    :close-on-click-modal=\"false\"\n    width=\"35%\"\n    top=\"30px\"\n  >\n    <div>\n      <el-tree\n        :data=\"organData\"\n        show-checkbox\n        default-expand-all\n        node-key=\"id\"\n        ref=\"organTree\"\n        highlight-current\n        :props=\"defaultProps\"\n      ></el-tree>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"bindOrganSure()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      visible: false,\n      organData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"label\"\n      },\n      roleId: \"\"\n    };\n  },\n  methods: {\n    showModal(roleId) {\n      this.visible = true;\n      this.roleId = roleId;\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      //this.$refs[\"addRoleForm\"].resetFields();\n    },\n    //获取机构\n    getOrgan() {\n      this.$store.dispatch(\"getAllOrgan\").then(\n        res => {\n          this.organData = res.data;\n          this.getRoleBindOrgan();\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //查询角色下绑定的机构\n    getRoleBindOrgan() {\n      this.$store.dispatch(\"getRoleBindOrgan\", this.roleId).then(\n        res => {\n          console.log(\"角色下绑定的菜单权限\", res);\n          let organIds = [];\n          res.data.forEach(item => {\n            organIds.push(item.organId);\n          });\n          this.$refs.organTree.setCheckedKeys(organIds);\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //绑定机构\n    bindOrganSure() {\n      console.log(this.$refs.organTree.getCheckedKeys());\n      let data = {\n        roleId: this.roleId,\n        organIds: this.$refs.organTree.getCheckedKeys()\n      };\n      this.$store.dispatch(\"roleBindOrgan\", data).then(\n        res => {\n          console.log(\"绑定\", res);\n          this.visible = false;\n          this.$message({\n            type: \"success\",\n            message: \"绑定成功\"\n          });\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    openDialog() {\n      this.getOrgan();\n    }\n  },\n  created() {}\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/bindOrgan.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"绑定机构\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"width\":\"35%\",\"top\":\"30px\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.closeDialog,\"open\":_vm.openDialog}},[_c('div',[_c('el-tree',{ref:\"organTree\",attrs:{\"data\":_vm.organData,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.bindOrganSure()}}},[_vm._v(\"确 定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0ca41333\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/bindOrgan.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindOrgan.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindOrgan.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0ca41333\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bindOrgan.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/bindOrgan.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}