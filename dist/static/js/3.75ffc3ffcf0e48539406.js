webpackJsonp([3],{HCkM:function(t,i){},"M/1k":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("JSML"),a=s("ZFpD"),n=s("MGeE"),r=s("u91Z"),o={data:function(){return{routekey:["findFaceRequest","findFaceHistory;findFaceHistoryDetail"],formLayout:"inline",percentNum:0}},components:{requestAndHisSubMenu:e.a,uploadImage:n.a,progressBar:a.a,circleImage:r.a},methods:{gotoClear:function(){this.$refs.uploadImage.clearAllImage(),this.$util.showOrHideDiv("result",!1)},gotoResult:function(){var t=this;if(this.fileObj=this.$refs.uploadImage.getImageFile(),this.fileObj,this.fileObj.fileImage)if(1==this.fileObj.errImg)this.$message.error(this.$t("verification.errorImg"));else{this.fileObj.fileImage;var i={image_file_1:this.fileObj.fileImage};this.$store.dispatch("getFindFace",i).then(function(i){i.data.face_list,t.$util.showOrHideDiv("result",!0),t.getPosition(i.data.face_list)},function(t){})}else this.$message.error(this.$t("main.pleaseUploadPicture"))},getPosition:function(t){var i=[];if(t.length>0)for(var s=0;s<t.length;s++){var e=t[s]?t[s]:[];i[s]=[parseInt(e[0]),parseInt(e[1]),parseInt(e[2])-parseInt(e[0]),parseInt(e[7])-parseInt(e[1])],i[s]}else i=[[0,0,0,0]];this.$refs.circleImage.showCircleImage(this.fileObj.fileImage,i)}},mounted:function(){this.$util.showOrHideDiv("result",!1)}},h={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"showContent"},[s("requestAndHisSubMenu",{attrs:{routekey:t.routekey}}),t._v(" "),s("div",{staticClass:"box_request"},[s("h3",[t._v("Upload photos")]),t._v(" "),s("uploadImage",{ref:"uploadImage",staticClass:"marginleft",attrs:{showNum:1}}),t._v(" "),s("div",{staticClass:"box_line"}),t._v(" "),s("div",{staticClass:"image_info"},[t._v("Upload photos or just drag and drop face comparison picture here add 2 photos, JPG/JPEG/PNG ; 256*256 ~ 4096*4096, <2MB")]),t._v(" "),s("div",{staticClass:"image_submit"},[s("a-button",{on:{click:t.gotoClear}},[t._v("Reset")]),t._v(" "),s("a-button",{attrs:{type:"primary",htmlType:"submit"},on:{click:t.gotoResult}},[t._v("Check")])],1)],1),t._v(" "),s("section",{staticClass:"result",attrs:{id:"result"}},[s("p",[t._v("Result")]),t._v(" "),s("div",{staticClass:"box_result"},[s("div",{staticClass:"extraction"},[s("circleImage",{ref:"circleImage"})],1)])])],1)},staticRenderFns:[]};var c=s("VU/8")(o,h,!1,function(t){s("ZLXF")},null,null);i.default=c.exports},ZLXF:function(t,i){},u91Z:function(t,i,s){"use strict";var e={name:"circleImage",data:function(){return{img:new Image,ctx:"",canvasWidth:0,canvasHeight:0,dataUrl:"",position:[[0,0,0,0]],scaling:5}},methods:{showCircleImage:function(t,i){this.dataUrl=t,this.position=i,this.initCanvas()},initCanvas:function(){var t=this.$refs.myCanvas;if(this.dataUrl,t.getContext){this.ctx=t.getContext("2d");var i=new FileReader;i.readAsDataURL(this.dataUrl);var s=this;i.onload=function(i){s.showImage(t,i.target.result)}}},initCanvas2:function(t,i){var s=this.$refs.myCanvas;this.position=i,s.getContext&&(this.ctx=s.getContext("2d"),this.showImage(s,t))},showImage:function(t,i){this.img.src=i,this.getScaling(this.img.width,this.img.height),this.canvasWidth=Math.round(this.img.width/this.scaling),this.canvasHeight=Math.round(this.img.height/this.scaling),this.img.width,this.img.height,this.canvasWidth,this.canvasHeight,this.scaling,t.setAttribute("width",this.canvasWidth),t.setAttribute("height",this.canvasHeight),this.img.onload=this.drawImage()},getScaling:function(t,i){var s=(t/i).toFixed(2);this.scaling=s>=1?(t/350).toFixed(1):(i/350).toFixed(1)},drawImage:function(){this.ctx.drawImage(this.img,0,0,this.canvasWidth,this.canvasHeight),this.position.length,this.position;for(var t=0;t<this.position.length;t++){var i=this.position[t];if(4==i.length){var s=Math.round(i[0]/this.scaling),e=Math.round(i[1]/this.scaling),a=Math.round(i[2]/this.scaling/2);this.positioning(s,e,a)}}},positioning:function(t,i,s){this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t+s,i+.8*s,1.3*s,0,2*Math.PI),this.ctx.lineWidth=2,this.ctx.strokeStyle="white",this.ctx.stroke()}}},a={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"cut_image"},[i("canvas",{ref:"myCanvas",staticClass:"myCanvas"})])},staticRenderFns:[]};var n=s("VU/8")(e,a,!1,function(t){s("HCkM")},null,null);i.a=n.exports}});
//# sourceMappingURL=3.75ffc3ffcf0e48539406.js.map