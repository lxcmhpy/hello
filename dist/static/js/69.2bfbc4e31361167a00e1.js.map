{"version":3,"sources":["webpack:///src/page/sys/role-manage/bindMenu.vue","webpack:///./src/page/sys/role-manage/bindMenu.vue?cfa9","webpack:///./src/page/sys/role-manage/bindMenu.vue"],"names":["bindMenu","data","visible","menuData","defaultProps","children","label","roleId","methods","showModal","this","closeDialog","getMenu","_this","$store","dispatch","then","res","getRoleBindMenu","err","_this2","permissionIds","forEach","item","push","permissionId","$refs","menuTree","setCheckedKeys","_this3","getCheckedKeys","$message","type","message","openDialog","created","role_manage_bindMenu","render","_vm","_h","$createElement","_c","_self","attrs","title","close-on-click-modal","width","top","on","update:visible","$event","close","open","ref","show-checkbox","default-expand-all","node-key","highlight-current","props","_v","staticClass","slot","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"sGA4BA,IAAAA,GACAC,KADA,WAEA,OACAC,SAAA,EACAC,YACAC,cACAC,SAAA,WACAC,MAAA,SAEAC,OAAA,KAGAC,SACAC,UADA,SACAF,GACAG,KAAAR,SAAA,EACAQ,KAAAH,UAGAI,YANA,WAOAD,KAAAR,SAAA,GAIAU,QAXA,WAWA,IAAAC,EAAAH,KACAA,KAAAI,OAAAC,SAAA,qBAAAC,KACA,SAAAC,GAEAJ,EAAAV,SAAAc,EAAAhB,KACAY,EAAAK,mBAEA,SAAAC,OAMAD,gBAxBA,WAwBA,IAAAE,EAAAV,KACAA,KAAAI,OAAAC,SAAA,kBAAAL,KAAAH,QAAAS,KACA,SAAAC,GAEA,IAAAI,KACAJ,EAAAhB,KAAAqB,QAAA,SAAAC,GACAF,EAAAG,KAAAD,EAAAE,gBAEAL,EAAAM,MAAAC,SAAAC,eAAAP,IAEA,SAAAF,OAMAnB,SAxCA,WAwCA,IAAA6B,EAAAnB,KACAA,KAAAgB,MAAAC,SAAAG,iBACA,IAAA7B,GACAM,OAAAG,KAAAH,OACAc,cAAAX,KAAAgB,MAAAC,SAAAG,kBAEApB,KAAAI,OAAAC,SAAA,eAAAd,GAAAe,KACA,SAAAC,GAEAY,EAAA3B,SAAA,EACA2B,EAAAE,UACAC,KAAA,UACAC,QAAA,UAGA,SAAAd,OAKAe,WA5DA,WA6DAxB,KAAAE,YAGAuB,QA5EA,cCzBeC,GADEC,OAFjB,WAA0B,IAAAC,EAAA5B,KAAa6B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,aAAuBE,OAAOC,MAAA,OAAA1C,QAAAoC,EAAApC,QAAA2C,wBAAA,EAAAC,MAAA,MAAAC,IAAA,QAA6FC,IAAKC,iBAAA,SAAAC,GAAkCZ,EAAApC,QAAAgD,GAAmBC,MAAAb,EAAA3B,YAAAyC,KAAAd,EAAAJ,cAAgDO,EAAA,OAAAA,EAAA,WAA0BY,IAAA,WAAAV,OAAsB1C,KAAAqC,EAAAnC,SAAAmD,gBAAA,GAAAC,qBAAA,GAAAC,WAAA,KAAAC,oBAAA,GAAAC,MAAApB,EAAAlC,iBAAgI,GAAAkC,EAAAqB,GAAA,KAAAlB,EAAA,QAA6BmB,YAAA,gBAAAjB,OAAmCkB,KAAA,UAAgBA,KAAA,WAAepB,EAAA,aAAkBO,IAAIc,MAAA,SAAAZ,GAAyBZ,EAAApC,SAAA,MAAsBoC,EAAAqB,GAAA,SAAArB,EAAAqB,GAAA,KAAAlB,EAAA,aAA8CE,OAAOX,KAAA,WAAiBgB,IAAKc,MAAA,SAAAZ,GAAyB,OAAAZ,EAAAtC,eAAwBsC,EAAAqB,GAAA,gBAE7vBI,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACElE,EACAoC,GATF,EAEA,KAEA,KAEA,MAUe+B,EAAA,QAAAH,EAAiB","file":"static/js/69.2bfbc4e31361167a00e1.js","sourcesContent":["<template>\n  <el-dialog\n    title=\"绑定菜单\"\n    :visible.sync=\"visible\"\n    @close=\"closeDialog\"\n    @open=\"openDialog\"\n    :close-on-click-modal=\"false\"\n    width=\"35%\"\n    top=\"30px\"\n  >\n    <div>\n      <el-tree\n        :data=\"menuData\"\n        show-checkbox\n        default-expand-all\n        node-key=\"id\"\n        ref=\"menuTree\"\n        highlight-current\n        :props=\"defaultProps\"\n      ></el-tree>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"bindMenu()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      visible: false,\n      menuData: [],\n      defaultProps: {\n        children: \"children\",\n        label: \"title\"\n      },\n      roleId: \"\"\n    };\n  },\n  methods: {\n    showModal(roleId) {\n      this.visible = true;\n      this.roleId = roleId;\n    },\n    //关闭弹窗的时候清除数据\n    closeDialog() {\n      this.visible = false;\n      //this.$refs[\"addRoleForm\"].resetFields();\n    },\n    //获取菜单\n    getMenu() {\n      this.$store.dispatch(\"getTreePermission\").then(\n        res => {\n          console.log(\"获取菜单\", res);\n          this.menuData = res.data;\n          this.getRoleBindMenu();\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //查询角色下绑定的菜单权限\n    getRoleBindMenu(){\n      this.$store.dispatch(\"getRoleBindMenu\",this.roleId).then(\n        res => {\n          console.log('角色下绑定的菜单权限',res);\n          let permissionIds=[];\n          res.data.forEach(item => {\n            permissionIds.push(item.permissionId);\n          });\n          this.$refs.menuTree.setCheckedKeys(permissionIds);\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    //绑定菜单\n    bindMenu() {\n      console.log(this.$refs.menuTree.getCheckedKeys());\n      let data = {\n          roleId:this.roleId,\n          permissionIds:this.$refs.menuTree.getCheckedKeys()\n      }\n      this.$store.dispatch(\"roleBindMenu\", data).then(\n        res => {\n          console.log(\"绑定\", res);\n          this.visible = false;\n          this.$message({\n            type: \"success\",\n            message: \"绑定成功\"\n          });\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    },\n    openDialog(){\n      this.getMenu();\n    }\n  },\n  created() {\n  }\n};\n</script>\n\n\n// WEBPACK FOOTER //\n// src/page/sys/role-manage/bindMenu.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"title\":\"绑定菜单\",\"visible\":_vm.visible,\"close-on-click-modal\":false,\"width\":\"35%\",\"top\":\"30px\"},on:{\"update:visible\":function($event){_vm.visible=$event},\"close\":_vm.closeDialog,\"open\":_vm.openDialog}},[_c('div',[_c('el-tree',{ref:\"menuTree\",attrs:{\"data\":_vm.menuData,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps}})],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.bindMenu()}}},[_vm._v(\"确 定\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-174ef76b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/sys/role-manage/bindMenu.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./bindMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-174ef76b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./bindMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/sys/role-manage/bindMenu.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}